var Is=Object.defineProperty;var _s=(t,n,r)=>n in t?Is(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var Yn=(t,n,r)=>_s(t,typeof n!="symbol"?n+"":n,r);import{aB as Rs,am as Ai,aO as ks,aP as vr,aQ as br,aR as Ts,aS as Os,c as ae,W as ue,aT as Qr,S as Gn,aU as Ls,aV as Us,aW as Cs,aX as Ns,aY as zs,aZ as qs,d as Ee,a_ as un,a2 as Fs,a$ as Ae,b0 as bn,ap as fe,an as Ds,ao as xr,b1 as Ks,b2 as Ii,b3 as Ps,al as Zs,b4 as nt,p as Vs,J as $s,q as js,aC as Hn,n as Ys,_ as we,C as Gs,a as Hs,b as Ws,l as Xs}from"./index-CfTi0Tvd.js";import{a as Js,h as Qs,s as to}from"./hmac-XaMk_Pys.js";import{s as ti}from"./sha256-CjTAiWzm.js";import{c as eo,a as no,b as Ne}from"./solanaRpcMiddlewares-Bhsm-lJf.js";var rn={exports:{}},ro=rn.exports,ei;function _i(){return ei||(ei=1,function(t){(function(n,r){function e(h,i){if(!h)throw new Error(i||"Assertion failed")}function c(h,i){h.super_=i;var u=function(){};u.prototype=i.prototype,h.prototype=new u,h.prototype.constructor=h}function o(h,i,u){if(o.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((i==="le"||i==="be")&&(u=i,i=10),this._init(h||0,i||10,u||"be"))}typeof n=="object"?n.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=Rs.Buffer}catch{}o.isBN=function(i){return i instanceof o?!0:i!==null&&typeof i=="object"&&i.constructor.wordSize===o.wordSize&&Array.isArray(i.words)},o.max=function(i,u){return i.cmp(u)>0?i:u},o.min=function(i,u){return i.cmp(u)<0?i:u},o.prototype._init=function(i,u,l){if(typeof i=="number")return this._initNumber(i,u,l);if(typeof i=="object")return this._initArray(i,u,l);u==="hex"&&(u=16),e(u===(u|0)&&u>=2&&u<=36),i=i.toString().replace(/\s+/g,"");var p=0;i[0]==="-"&&(p++,this.negative=1),p<i.length&&(u===16?this._parseHex(i,p,l):(this._parseBase(i,u,p),l==="le"&&this._initArray(this.toArray(),u,l)))},o.prototype._initNumber=function(i,u,l){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[i&67108863],this.length=1):i<4503599627370496?(this.words=[i&67108863,i/67108864&67108863],this.length=2):(e(i<9007199254740992),this.words=[i&67108863,i/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},o.prototype._initArray=function(i,u,l){if(e(typeof i.length=="number"),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var y,v,E=0;if(l==="be")for(p=i.length-1,y=0;p>=0;p-=3)v=i[p]|i[p-1]<<8|i[p-2]<<16,this.words[y]|=v<<E&67108863,this.words[y+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,y++);else if(l==="le")for(p=0,y=0;p<i.length;p+=3)v=i[p]|i[p+1]<<8|i[p+2]<<16,this.words[y]|=v<<E&67108863,this.words[y+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,y++);return this._strip()};function x(h,i){var u=h.charCodeAt(i);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;e(!1,"Invalid character in "+h)}function g(h,i,u){var l=x(h,u);return u-1>=i&&(l|=x(h,u-1)<<4),l}o.prototype._parseHex=function(i,u,l){this.length=Math.ceil((i.length-u)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var y=0,v=0,E;if(l==="be")for(p=i.length-1;p>=u;p-=2)E=g(i,u,p)<<y,this.words[v]|=E&67108863,y>=18?(y-=18,v+=1,this.words[v]|=E>>>26):y+=8;else{var m=i.length-u;for(p=m%2===0?u+1:u;p<i.length;p+=2)E=g(i,u,p)<<y,this.words[v]|=E&67108863,y>=18?(y-=18,v+=1,this.words[v]|=E>>>26):y+=8}this._strip()};function B(h,i,u,l){for(var p=0,y=0,v=Math.min(h.length,u),E=i;E<v;E++){var m=h.charCodeAt(E)-48;p*=l,m>=49?y=m-49+10:m>=17?y=m-17+10:y=m,e(m>=0&&y<l,"Invalid character"),p+=y}return p}o.prototype._parseBase=function(i,u,l){this.words=[0],this.length=1;for(var p=0,y=1;y<=67108863;y*=u)p++;p--,y=y/u|0;for(var v=i.length-l,E=v%p,m=Math.min(v,v-E)+l,s=0,a=l;a<m;a+=p)s=B(i,a,a+p,u),this.imuln(y),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(E!==0){var d=1;for(s=B(i,a,i.length,u),a=0;a<E;a++)d*=u;this.imuln(d),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},o.prototype.copy=function(i){i.words=new Array(this.length);for(var u=0;u<this.length;u++)i.words[u]=this.words[u];i.length=this.length,i.negative=this.negative,i.red=this.red};function L(h,i){h.words=i.words,h.length=i.length,h.negative=i.negative,h.red=i.red}if(o.prototype._move=function(i){L(i,this)},o.prototype.clone=function(){var i=new o(null);return this.copy(i),i},o.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=F}catch{o.prototype.inspect=F}else o.prototype.inspect=F;function F(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(i,u){i=i||10,u=u|0||1;var l;if(i===16||i==="hex"){l="";for(var p=0,y=0,v=0;v<this.length;v++){var E=this.words[v],m=((E<<p|y)&16777215).toString(16);y=E>>>24-p&16777215,p+=2,p>=26&&(p-=26,v--),y!==0||v!==this.length-1?l=I[6-m.length]+m+l:l=m+l}for(y!==0&&(l=y.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(i===(i|0)&&i>=2&&i<=36){var s=_[i],a=C[i];l="";var d=this.clone();for(d.negative=0;!d.isZero();){var w=d.modrn(a).toString(i);d=d.idivn(a),d.isZero()?l=w+l:l=I[s-w.length]+w+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}e(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var i=this.words[0];return this.length===2?i+=this.words[1]*67108864:this.length===3&&this.words[2]===1?i+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-i:i},o.prototype.toJSON=function(){return this.toString(16,2)},f&&(o.prototype.toBuffer=function(i,u){return this.toArrayLike(f,i,u)}),o.prototype.toArray=function(i,u){return this.toArrayLike(Array,i,u)};var z=function(i,u){return i.allocUnsafe?i.allocUnsafe(u):new i(u)};o.prototype.toArrayLike=function(i,u,l){this._strip();var p=this.byteLength(),y=l||Math.max(1,p);e(p<=y,"byte array longer than desired length"),e(y>0,"Requested array length <= 0");var v=z(i,y),E=u==="le"?"LE":"BE";return this["_toArrayLike"+E](v,p),v},o.prototype._toArrayLikeLE=function(i,u){for(var l=0,p=0,y=0,v=0;y<this.length;y++){var E=this.words[y]<<v|p;i[l++]=E&255,l<i.length&&(i[l++]=E>>8&255),l<i.length&&(i[l++]=E>>16&255),v===6?(l<i.length&&(i[l++]=E>>24&255),p=0,v=0):(p=E>>>24,v+=2)}if(l<i.length)for(i[l++]=p;l<i.length;)i[l++]=0},o.prototype._toArrayLikeBE=function(i,u){for(var l=i.length-1,p=0,y=0,v=0;y<this.length;y++){var E=this.words[y]<<v|p;i[l--]=E&255,l>=0&&(i[l--]=E>>8&255),l>=0&&(i[l--]=E>>16&255),v===6?(l>=0&&(i[l--]=E>>24&255),p=0,v=0):(p=E>>>24,v+=2)}if(l>=0)for(i[l--]=p;l>=0;)i[l--]=0},Math.clz32?o.prototype._countBits=function(i){return 32-Math.clz32(i)}:o.prototype._countBits=function(i){var u=i,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},o.prototype._zeroBits=function(i){if(i===0)return 26;var u=i,l=0;return(u&8191)===0&&(l+=13,u>>>=13),(u&127)===0&&(l+=7,u>>>=7),(u&15)===0&&(l+=4,u>>>=4),(u&3)===0&&(l+=2,u>>>=2),(u&1)===0&&l++,l},o.prototype.bitLength=function(){var i=this.words[this.length-1],u=this._countBits(i);return(this.length-1)*26+u};function K(h){for(var i=new Array(h.bitLength()),u=0;u<i.length;u++){var l=u/26|0,p=u%26;i[u]=h.words[l]>>>p&1}return i}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(i+=l,l!==26)break}return i},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(i){return this.negative!==0?this.abs().inotn(i).iaddn(1):this.clone()},o.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var u=0;u<i.length;u++)this.words[u]=this.words[u]|i.words[u];return this._strip()},o.prototype.ior=function(i){return e((this.negative|i.negative)===0),this.iuor(i)},o.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},o.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},o.prototype.iuand=function(i){var u;this.length>i.length?u=i:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&i.words[l];return this.length=u.length,this._strip()},o.prototype.iand=function(i){return e((this.negative|i.negative)===0),this.iuand(i)},o.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},o.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},o.prototype.iuxor=function(i){var u,l;this.length>i.length?(u=this,l=i):(u=i,l=this);for(var p=0;p<l.length;p++)this.words[p]=u.words[p]^l.words[p];if(this!==u)for(;p<u.length;p++)this.words[p]=u.words[p];return this.length=u.length,this._strip()},o.prototype.ixor=function(i){return e((this.negative|i.negative)===0),this.iuxor(i)},o.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},o.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},o.prototype.inotn=function(i){e(typeof i=="number"&&i>=0);var u=Math.ceil(i/26)|0,l=i%26;this._expand(u),l>0&&u--;for(var p=0;p<u;p++)this.words[p]=~this.words[p]&67108863;return l>0&&(this.words[p]=~this.words[p]&67108863>>26-l),this._strip()},o.prototype.notn=function(i){return this.clone().inotn(i)},o.prototype.setn=function(i,u){e(typeof i=="number"&&i>=0);var l=i/26|0,p=i%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<p:this.words[l]=this.words[l]&~(1<<p),this._strip()},o.prototype.iadd=function(i){var u;if(this.negative!==0&&i.negative===0)return this.negative=0,u=this.isub(i),this.negative^=1,this._normSign();if(this.negative===0&&i.negative!==0)return i.negative=0,u=this.isub(i),i.negative=1,u._normSign();var l,p;this.length>i.length?(l=this,p=i):(l=i,p=this);for(var y=0,v=0;v<p.length;v++)u=(l.words[v]|0)+(p.words[v]|0)+y,this.words[v]=u&67108863,y=u>>>26;for(;y!==0&&v<l.length;v++)u=(l.words[v]|0)+y,this.words[v]=u&67108863,y=u>>>26;if(this.length=l.length,y!==0)this.words[this.length]=y,this.length++;else if(l!==this)for(;v<l.length;v++)this.words[v]=l.words[v];return this},o.prototype.add=function(i){var u;return i.negative!==0&&this.negative===0?(i.negative=0,u=this.sub(i),i.negative^=1,u):i.negative===0&&this.negative!==0?(this.negative=0,u=i.sub(this),this.negative=1,u):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},o.prototype.isub=function(i){if(i.negative!==0){i.negative=0;var u=this.iadd(i);return i.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var l=this.cmp(i);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,y;l>0?(p=this,y=i):(p=i,y=this);for(var v=0,E=0;E<y.length;E++)u=(p.words[E]|0)-(y.words[E]|0)+v,v=u>>26,this.words[E]=u&67108863;for(;v!==0&&E<p.length;E++)u=(p.words[E]|0)+v,v=u>>26,this.words[E]=u&67108863;if(v===0&&E<p.length&&p!==this)for(;E<p.length;E++)this.words[E]=p.words[E];return this.length=Math.max(this.length,E),p!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(i){return this.clone().isub(i)};function N(h,i,u){u.negative=i.negative^h.negative;var l=h.length+i.length|0;u.length=l,l=l-1|0;var p=h.words[0]|0,y=i.words[0]|0,v=p*y,E=v&67108863,m=v/67108864|0;u.words[0]=E;for(var s=1;s<l;s++){for(var a=m>>>26,d=m&67108863,w=Math.min(s,i.length-1),A=Math.max(0,s-h.length+1);A<=w;A++){var U=s-A|0;p=h.words[U]|0,y=i.words[A]|0,v=p*y+d,a+=v/67108864|0,d=v&67108863}u.words[s]=d|0,m=a|0}return m!==0?u.words[s]=m|0:u.length--,u._strip()}var P=function(i,u,l){var p=i.words,y=u.words,v=l.words,E=0,m,s,a,d=p[0]|0,w=d&8191,A=d>>>13,U=p[1]|0,V=U&8191,Y=U>>>13,it=p[2]|0,st=it&8191,at=it>>>13,Ve=p[3]|0,ht=Ve&8191,dt=Ve>>>13,zr=p[4]|0,pt=zr&8191,gt=zr>>>13,qr=p[5]|0,mt=qr&8191,yt=qr>>>13,Fr=p[6]|0,wt=Fr&8191,vt=Fr>>>13,Dr=p[7]|0,bt=Dr&8191,xt=Dr>>>13,Kr=p[8]|0,Et=Kr&8191,Mt=Kr>>>13,Pr=p[9]|0,St=Pr&8191,Bt=Pr>>>13,Zr=y[0]|0,At=Zr&8191,It=Zr>>>13,Vr=y[1]|0,_t=Vr&8191,Rt=Vr>>>13,$r=y[2]|0,kt=$r&8191,Tt=$r>>>13,jr=y[3]|0,Ot=jr&8191,Lt=jr>>>13,Yr=y[4]|0,Ut=Yr&8191,Ct=Yr>>>13,Gr=y[5]|0,Nt=Gr&8191,zt=Gr>>>13,Hr=y[6]|0,qt=Hr&8191,Ft=Hr>>>13,Wr=y[7]|0,Dt=Wr&8191,Kt=Wr>>>13,Xr=y[8]|0,Pt=Xr&8191,Zt=Xr>>>13,Jr=y[9]|0,Vt=Jr&8191,$t=Jr>>>13;l.negative=i.negative^u.negative,l.length=19,m=Math.imul(w,At),s=Math.imul(w,It),s=s+Math.imul(A,At)|0,a=Math.imul(A,It);var _n=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(_n>>>26)|0,_n&=67108863,m=Math.imul(V,At),s=Math.imul(V,It),s=s+Math.imul(Y,At)|0,a=Math.imul(Y,It),m=m+Math.imul(w,_t)|0,s=s+Math.imul(w,Rt)|0,s=s+Math.imul(A,_t)|0,a=a+Math.imul(A,Rt)|0;var Rn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,m=Math.imul(st,At),s=Math.imul(st,It),s=s+Math.imul(at,At)|0,a=Math.imul(at,It),m=m+Math.imul(V,_t)|0,s=s+Math.imul(V,Rt)|0,s=s+Math.imul(Y,_t)|0,a=a+Math.imul(Y,Rt)|0,m=m+Math.imul(w,kt)|0,s=s+Math.imul(w,Tt)|0,s=s+Math.imul(A,kt)|0,a=a+Math.imul(A,Tt)|0;var kn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(kn>>>26)|0,kn&=67108863,m=Math.imul(ht,At),s=Math.imul(ht,It),s=s+Math.imul(dt,At)|0,a=Math.imul(dt,It),m=m+Math.imul(st,_t)|0,s=s+Math.imul(st,Rt)|0,s=s+Math.imul(at,_t)|0,a=a+Math.imul(at,Rt)|0,m=m+Math.imul(V,kt)|0,s=s+Math.imul(V,Tt)|0,s=s+Math.imul(Y,kt)|0,a=a+Math.imul(Y,Tt)|0,m=m+Math.imul(w,Ot)|0,s=s+Math.imul(w,Lt)|0,s=s+Math.imul(A,Ot)|0,a=a+Math.imul(A,Lt)|0;var Tn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,m=Math.imul(pt,At),s=Math.imul(pt,It),s=s+Math.imul(gt,At)|0,a=Math.imul(gt,It),m=m+Math.imul(ht,_t)|0,s=s+Math.imul(ht,Rt)|0,s=s+Math.imul(dt,_t)|0,a=a+Math.imul(dt,Rt)|0,m=m+Math.imul(st,kt)|0,s=s+Math.imul(st,Tt)|0,s=s+Math.imul(at,kt)|0,a=a+Math.imul(at,Tt)|0,m=m+Math.imul(V,Ot)|0,s=s+Math.imul(V,Lt)|0,s=s+Math.imul(Y,Ot)|0,a=a+Math.imul(Y,Lt)|0,m=m+Math.imul(w,Ut)|0,s=s+Math.imul(w,Ct)|0,s=s+Math.imul(A,Ut)|0,a=a+Math.imul(A,Ct)|0;var On=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(On>>>26)|0,On&=67108863,m=Math.imul(mt,At),s=Math.imul(mt,It),s=s+Math.imul(yt,At)|0,a=Math.imul(yt,It),m=m+Math.imul(pt,_t)|0,s=s+Math.imul(pt,Rt)|0,s=s+Math.imul(gt,_t)|0,a=a+Math.imul(gt,Rt)|0,m=m+Math.imul(ht,kt)|0,s=s+Math.imul(ht,Tt)|0,s=s+Math.imul(dt,kt)|0,a=a+Math.imul(dt,Tt)|0,m=m+Math.imul(st,Ot)|0,s=s+Math.imul(st,Lt)|0,s=s+Math.imul(at,Ot)|0,a=a+Math.imul(at,Lt)|0,m=m+Math.imul(V,Ut)|0,s=s+Math.imul(V,Ct)|0,s=s+Math.imul(Y,Ut)|0,a=a+Math.imul(Y,Ct)|0,m=m+Math.imul(w,Nt)|0,s=s+Math.imul(w,zt)|0,s=s+Math.imul(A,Nt)|0,a=a+Math.imul(A,zt)|0;var Ln=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,m=Math.imul(wt,At),s=Math.imul(wt,It),s=s+Math.imul(vt,At)|0,a=Math.imul(vt,It),m=m+Math.imul(mt,_t)|0,s=s+Math.imul(mt,Rt)|0,s=s+Math.imul(yt,_t)|0,a=a+Math.imul(yt,Rt)|0,m=m+Math.imul(pt,kt)|0,s=s+Math.imul(pt,Tt)|0,s=s+Math.imul(gt,kt)|0,a=a+Math.imul(gt,Tt)|0,m=m+Math.imul(ht,Ot)|0,s=s+Math.imul(ht,Lt)|0,s=s+Math.imul(dt,Ot)|0,a=a+Math.imul(dt,Lt)|0,m=m+Math.imul(st,Ut)|0,s=s+Math.imul(st,Ct)|0,s=s+Math.imul(at,Ut)|0,a=a+Math.imul(at,Ct)|0,m=m+Math.imul(V,Nt)|0,s=s+Math.imul(V,zt)|0,s=s+Math.imul(Y,Nt)|0,a=a+Math.imul(Y,zt)|0,m=m+Math.imul(w,qt)|0,s=s+Math.imul(w,Ft)|0,s=s+Math.imul(A,qt)|0,a=a+Math.imul(A,Ft)|0;var Un=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,m=Math.imul(bt,At),s=Math.imul(bt,It),s=s+Math.imul(xt,At)|0,a=Math.imul(xt,It),m=m+Math.imul(wt,_t)|0,s=s+Math.imul(wt,Rt)|0,s=s+Math.imul(vt,_t)|0,a=a+Math.imul(vt,Rt)|0,m=m+Math.imul(mt,kt)|0,s=s+Math.imul(mt,Tt)|0,s=s+Math.imul(yt,kt)|0,a=a+Math.imul(yt,Tt)|0,m=m+Math.imul(pt,Ot)|0,s=s+Math.imul(pt,Lt)|0,s=s+Math.imul(gt,Ot)|0,a=a+Math.imul(gt,Lt)|0,m=m+Math.imul(ht,Ut)|0,s=s+Math.imul(ht,Ct)|0,s=s+Math.imul(dt,Ut)|0,a=a+Math.imul(dt,Ct)|0,m=m+Math.imul(st,Nt)|0,s=s+Math.imul(st,zt)|0,s=s+Math.imul(at,Nt)|0,a=a+Math.imul(at,zt)|0,m=m+Math.imul(V,qt)|0,s=s+Math.imul(V,Ft)|0,s=s+Math.imul(Y,qt)|0,a=a+Math.imul(Y,Ft)|0,m=m+Math.imul(w,Dt)|0,s=s+Math.imul(w,Kt)|0,s=s+Math.imul(A,Dt)|0,a=a+Math.imul(A,Kt)|0;var Cn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,m=Math.imul(Et,At),s=Math.imul(Et,It),s=s+Math.imul(Mt,At)|0,a=Math.imul(Mt,It),m=m+Math.imul(bt,_t)|0,s=s+Math.imul(bt,Rt)|0,s=s+Math.imul(xt,_t)|0,a=a+Math.imul(xt,Rt)|0,m=m+Math.imul(wt,kt)|0,s=s+Math.imul(wt,Tt)|0,s=s+Math.imul(vt,kt)|0,a=a+Math.imul(vt,Tt)|0,m=m+Math.imul(mt,Ot)|0,s=s+Math.imul(mt,Lt)|0,s=s+Math.imul(yt,Ot)|0,a=a+Math.imul(yt,Lt)|0,m=m+Math.imul(pt,Ut)|0,s=s+Math.imul(pt,Ct)|0,s=s+Math.imul(gt,Ut)|0,a=a+Math.imul(gt,Ct)|0,m=m+Math.imul(ht,Nt)|0,s=s+Math.imul(ht,zt)|0,s=s+Math.imul(dt,Nt)|0,a=a+Math.imul(dt,zt)|0,m=m+Math.imul(st,qt)|0,s=s+Math.imul(st,Ft)|0,s=s+Math.imul(at,qt)|0,a=a+Math.imul(at,Ft)|0,m=m+Math.imul(V,Dt)|0,s=s+Math.imul(V,Kt)|0,s=s+Math.imul(Y,Dt)|0,a=a+Math.imul(Y,Kt)|0,m=m+Math.imul(w,Pt)|0,s=s+Math.imul(w,Zt)|0,s=s+Math.imul(A,Pt)|0,a=a+Math.imul(A,Zt)|0;var Nn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,m=Math.imul(St,At),s=Math.imul(St,It),s=s+Math.imul(Bt,At)|0,a=Math.imul(Bt,It),m=m+Math.imul(Et,_t)|0,s=s+Math.imul(Et,Rt)|0,s=s+Math.imul(Mt,_t)|0,a=a+Math.imul(Mt,Rt)|0,m=m+Math.imul(bt,kt)|0,s=s+Math.imul(bt,Tt)|0,s=s+Math.imul(xt,kt)|0,a=a+Math.imul(xt,Tt)|0,m=m+Math.imul(wt,Ot)|0,s=s+Math.imul(wt,Lt)|0,s=s+Math.imul(vt,Ot)|0,a=a+Math.imul(vt,Lt)|0,m=m+Math.imul(mt,Ut)|0,s=s+Math.imul(mt,Ct)|0,s=s+Math.imul(yt,Ut)|0,a=a+Math.imul(yt,Ct)|0,m=m+Math.imul(pt,Nt)|0,s=s+Math.imul(pt,zt)|0,s=s+Math.imul(gt,Nt)|0,a=a+Math.imul(gt,zt)|0,m=m+Math.imul(ht,qt)|0,s=s+Math.imul(ht,Ft)|0,s=s+Math.imul(dt,qt)|0,a=a+Math.imul(dt,Ft)|0,m=m+Math.imul(st,Dt)|0,s=s+Math.imul(st,Kt)|0,s=s+Math.imul(at,Dt)|0,a=a+Math.imul(at,Kt)|0,m=m+Math.imul(V,Pt)|0,s=s+Math.imul(V,Zt)|0,s=s+Math.imul(Y,Pt)|0,a=a+Math.imul(Y,Zt)|0,m=m+Math.imul(w,Vt)|0,s=s+Math.imul(w,$t)|0,s=s+Math.imul(A,Vt)|0,a=a+Math.imul(A,$t)|0;var zn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,m=Math.imul(St,_t),s=Math.imul(St,Rt),s=s+Math.imul(Bt,_t)|0,a=Math.imul(Bt,Rt),m=m+Math.imul(Et,kt)|0,s=s+Math.imul(Et,Tt)|0,s=s+Math.imul(Mt,kt)|0,a=a+Math.imul(Mt,Tt)|0,m=m+Math.imul(bt,Ot)|0,s=s+Math.imul(bt,Lt)|0,s=s+Math.imul(xt,Ot)|0,a=a+Math.imul(xt,Lt)|0,m=m+Math.imul(wt,Ut)|0,s=s+Math.imul(wt,Ct)|0,s=s+Math.imul(vt,Ut)|0,a=a+Math.imul(vt,Ct)|0,m=m+Math.imul(mt,Nt)|0,s=s+Math.imul(mt,zt)|0,s=s+Math.imul(yt,Nt)|0,a=a+Math.imul(yt,zt)|0,m=m+Math.imul(pt,qt)|0,s=s+Math.imul(pt,Ft)|0,s=s+Math.imul(gt,qt)|0,a=a+Math.imul(gt,Ft)|0,m=m+Math.imul(ht,Dt)|0,s=s+Math.imul(ht,Kt)|0,s=s+Math.imul(dt,Dt)|0,a=a+Math.imul(dt,Kt)|0,m=m+Math.imul(st,Pt)|0,s=s+Math.imul(st,Zt)|0,s=s+Math.imul(at,Pt)|0,a=a+Math.imul(at,Zt)|0,m=m+Math.imul(V,Vt)|0,s=s+Math.imul(V,$t)|0,s=s+Math.imul(Y,Vt)|0,a=a+Math.imul(Y,$t)|0;var qn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,m=Math.imul(St,kt),s=Math.imul(St,Tt),s=s+Math.imul(Bt,kt)|0,a=Math.imul(Bt,Tt),m=m+Math.imul(Et,Ot)|0,s=s+Math.imul(Et,Lt)|0,s=s+Math.imul(Mt,Ot)|0,a=a+Math.imul(Mt,Lt)|0,m=m+Math.imul(bt,Ut)|0,s=s+Math.imul(bt,Ct)|0,s=s+Math.imul(xt,Ut)|0,a=a+Math.imul(xt,Ct)|0,m=m+Math.imul(wt,Nt)|0,s=s+Math.imul(wt,zt)|0,s=s+Math.imul(vt,Nt)|0,a=a+Math.imul(vt,zt)|0,m=m+Math.imul(mt,qt)|0,s=s+Math.imul(mt,Ft)|0,s=s+Math.imul(yt,qt)|0,a=a+Math.imul(yt,Ft)|0,m=m+Math.imul(pt,Dt)|0,s=s+Math.imul(pt,Kt)|0,s=s+Math.imul(gt,Dt)|0,a=a+Math.imul(gt,Kt)|0,m=m+Math.imul(ht,Pt)|0,s=s+Math.imul(ht,Zt)|0,s=s+Math.imul(dt,Pt)|0,a=a+Math.imul(dt,Zt)|0,m=m+Math.imul(st,Vt)|0,s=s+Math.imul(st,$t)|0,s=s+Math.imul(at,Vt)|0,a=a+Math.imul(at,$t)|0;var Fn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,m=Math.imul(St,Ot),s=Math.imul(St,Lt),s=s+Math.imul(Bt,Ot)|0,a=Math.imul(Bt,Lt),m=m+Math.imul(Et,Ut)|0,s=s+Math.imul(Et,Ct)|0,s=s+Math.imul(Mt,Ut)|0,a=a+Math.imul(Mt,Ct)|0,m=m+Math.imul(bt,Nt)|0,s=s+Math.imul(bt,zt)|0,s=s+Math.imul(xt,Nt)|0,a=a+Math.imul(xt,zt)|0,m=m+Math.imul(wt,qt)|0,s=s+Math.imul(wt,Ft)|0,s=s+Math.imul(vt,qt)|0,a=a+Math.imul(vt,Ft)|0,m=m+Math.imul(mt,Dt)|0,s=s+Math.imul(mt,Kt)|0,s=s+Math.imul(yt,Dt)|0,a=a+Math.imul(yt,Kt)|0,m=m+Math.imul(pt,Pt)|0,s=s+Math.imul(pt,Zt)|0,s=s+Math.imul(gt,Pt)|0,a=a+Math.imul(gt,Zt)|0,m=m+Math.imul(ht,Vt)|0,s=s+Math.imul(ht,$t)|0,s=s+Math.imul(dt,Vt)|0,a=a+Math.imul(dt,$t)|0;var Dn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,m=Math.imul(St,Ut),s=Math.imul(St,Ct),s=s+Math.imul(Bt,Ut)|0,a=Math.imul(Bt,Ct),m=m+Math.imul(Et,Nt)|0,s=s+Math.imul(Et,zt)|0,s=s+Math.imul(Mt,Nt)|0,a=a+Math.imul(Mt,zt)|0,m=m+Math.imul(bt,qt)|0,s=s+Math.imul(bt,Ft)|0,s=s+Math.imul(xt,qt)|0,a=a+Math.imul(xt,Ft)|0,m=m+Math.imul(wt,Dt)|0,s=s+Math.imul(wt,Kt)|0,s=s+Math.imul(vt,Dt)|0,a=a+Math.imul(vt,Kt)|0,m=m+Math.imul(mt,Pt)|0,s=s+Math.imul(mt,Zt)|0,s=s+Math.imul(yt,Pt)|0,a=a+Math.imul(yt,Zt)|0,m=m+Math.imul(pt,Vt)|0,s=s+Math.imul(pt,$t)|0,s=s+Math.imul(gt,Vt)|0,a=a+Math.imul(gt,$t)|0;var Kn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,m=Math.imul(St,Nt),s=Math.imul(St,zt),s=s+Math.imul(Bt,Nt)|0,a=Math.imul(Bt,zt),m=m+Math.imul(Et,qt)|0,s=s+Math.imul(Et,Ft)|0,s=s+Math.imul(Mt,qt)|0,a=a+Math.imul(Mt,Ft)|0,m=m+Math.imul(bt,Dt)|0,s=s+Math.imul(bt,Kt)|0,s=s+Math.imul(xt,Dt)|0,a=a+Math.imul(xt,Kt)|0,m=m+Math.imul(wt,Pt)|0,s=s+Math.imul(wt,Zt)|0,s=s+Math.imul(vt,Pt)|0,a=a+Math.imul(vt,Zt)|0,m=m+Math.imul(mt,Vt)|0,s=s+Math.imul(mt,$t)|0,s=s+Math.imul(yt,Vt)|0,a=a+Math.imul(yt,$t)|0;var Pn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,m=Math.imul(St,qt),s=Math.imul(St,Ft),s=s+Math.imul(Bt,qt)|0,a=Math.imul(Bt,Ft),m=m+Math.imul(Et,Dt)|0,s=s+Math.imul(Et,Kt)|0,s=s+Math.imul(Mt,Dt)|0,a=a+Math.imul(Mt,Kt)|0,m=m+Math.imul(bt,Pt)|0,s=s+Math.imul(bt,Zt)|0,s=s+Math.imul(xt,Pt)|0,a=a+Math.imul(xt,Zt)|0,m=m+Math.imul(wt,Vt)|0,s=s+Math.imul(wt,$t)|0,s=s+Math.imul(vt,Vt)|0,a=a+Math.imul(vt,$t)|0;var Zn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,m=Math.imul(St,Dt),s=Math.imul(St,Kt),s=s+Math.imul(Bt,Dt)|0,a=Math.imul(Bt,Kt),m=m+Math.imul(Et,Pt)|0,s=s+Math.imul(Et,Zt)|0,s=s+Math.imul(Mt,Pt)|0,a=a+Math.imul(Mt,Zt)|0,m=m+Math.imul(bt,Vt)|0,s=s+Math.imul(bt,$t)|0,s=s+Math.imul(xt,Vt)|0,a=a+Math.imul(xt,$t)|0;var Vn=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,m=Math.imul(St,Pt),s=Math.imul(St,Zt),s=s+Math.imul(Bt,Pt)|0,a=Math.imul(Bt,Zt),m=m+Math.imul(Et,Vt)|0,s=s+Math.imul(Et,$t)|0,s=s+Math.imul(Mt,Vt)|0,a=a+Math.imul(Mt,$t)|0;var $n=(E+m|0)+((s&8191)<<13)|0;E=(a+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,m=Math.imul(St,Vt),s=Math.imul(St,$t),s=s+Math.imul(Bt,Vt)|0,a=Math.imul(Bt,$t);var jn=(E+m|0)+((s&8191)<<13)|0;return E=(a+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,v[0]=_n,v[1]=Rn,v[2]=kn,v[3]=Tn,v[4]=On,v[5]=Ln,v[6]=Un,v[7]=Cn,v[8]=Nn,v[9]=zn,v[10]=qn,v[11]=Fn,v[12]=Dn,v[13]=Kn,v[14]=Pn,v[15]=Zn,v[16]=Vn,v[17]=$n,v[18]=jn,E!==0&&(v[19]=E,l.length++),l};Math.imul||(P=N);function D(h,i,u){u.negative=i.negative^h.negative,u.length=h.length+i.length;for(var l=0,p=0,y=0;y<u.length-1;y++){var v=p;p=0;for(var E=l&67108863,m=Math.min(y,i.length-1),s=Math.max(0,y-h.length+1);s<=m;s++){var a=y-s,d=h.words[a]|0,w=i.words[s]|0,A=d*w,U=A&67108863;v=v+(A/67108864|0)|0,U=U+E|0,E=U&67108863,v=v+(U>>>26)|0,p+=v>>>26,v&=67108863}u.words[y]=E,l=v,v=p}return l!==0?u.words[y]=l:u.length--,u._strip()}function H(h,i,u){return D(h,i,u)}o.prototype.mulTo=function(i,u){var l,p=this.length+i.length;return this.length===10&&i.length===10?l=P(this,i,u):p<63?l=N(this,i,u):p<1024?l=D(this,i,u):l=H(this,i,u),l},o.prototype.mul=function(i){var u=new o(null);return u.words=new Array(this.length+i.length),this.mulTo(i,u)},o.prototype.mulf=function(i){var u=new o(null);return u.words=new Array(this.length+i.length),H(this,i,u)},o.prototype.imul=function(i){return this.clone().mulTo(i,this)},o.prototype.imuln=function(i){var u=i<0;u&&(i=-i),e(typeof i=="number"),e(i<67108864);for(var l=0,p=0;p<this.length;p++){var y=(this.words[p]|0)*i,v=(y&67108863)+(l&67108863);l>>=26,l+=y/67108864|0,l+=v>>>26,this.words[p]=v&67108863}return l!==0&&(this.words[p]=l,this.length++),this.length=i===0?1:this.length,u?this.ineg():this},o.prototype.muln=function(i){return this.clone().imuln(i)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(i){var u=K(i);if(u.length===0)return new o(1);for(var l=this,p=0;p<u.length&&u[p]===0;p++,l=l.sqr());if(++p<u.length)for(var y=l.sqr();p<u.length;p++,y=y.sqr())u[p]!==0&&(l=l.mul(y));return l},o.prototype.iushln=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,p=67108863>>>26-u<<26-u,y;if(u!==0){var v=0;for(y=0;y<this.length;y++){var E=this.words[y]&p,m=(this.words[y]|0)-E<<u;this.words[y]=m|v,v=E>>>26-u}v&&(this.words[y]=v,this.length++)}if(l!==0){for(y=this.length-1;y>=0;y--)this.words[y+l]=this.words[y];for(y=0;y<l;y++)this.words[y]=0;this.length+=l}return this._strip()},o.prototype.ishln=function(i){return e(this.negative===0),this.iushln(i)},o.prototype.iushrn=function(i,u,l){e(typeof i=="number"&&i>=0);var p;u?p=(u-u%26)/26:p=0;var y=i%26,v=Math.min((i-y)/26,this.length),E=67108863^67108863>>>y<<y,m=l;if(p-=v,p=Math.max(0,p),m){for(var s=0;s<v;s++)m.words[s]=this.words[s];m.length=v}if(v!==0)if(this.length>v)for(this.length-=v,s=0;s<this.length;s++)this.words[s]=this.words[s+v];else this.words[0]=0,this.length=1;var a=0;for(s=this.length-1;s>=0&&(a!==0||s>=p);s--){var d=this.words[s]|0;this.words[s]=a<<26-y|d>>>y,a=d&E}return m&&a!==0&&(m.words[m.length++]=a),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(i,u,l){return e(this.negative===0),this.iushrn(i,u,l)},o.prototype.shln=function(i){return this.clone().ishln(i)},o.prototype.ushln=function(i){return this.clone().iushln(i)},o.prototype.shrn=function(i){return this.clone().ishrn(i)},o.prototype.ushrn=function(i){return this.clone().iushrn(i)},o.prototype.testn=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26,p=1<<u;if(this.length<=l)return!1;var y=this.words[l];return!!(y&p)},o.prototype.imaskn=function(i){e(typeof i=="number"&&i>=0);var u=i%26,l=(i-u)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var p=67108863^67108863>>>u<<u;this.words[this.length-1]&=p}return this._strip()},o.prototype.maskn=function(i){return this.clone().imaskn(i)},o.prototype.iaddn=function(i){return e(typeof i=="number"),e(i<67108864),i<0?this.isubn(-i):this.negative!==0?this.length===1&&(this.words[0]|0)<=i?(this.words[0]=i-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(i),this.negative=1,this):this._iaddn(i)},o.prototype._iaddn=function(i){this.words[0]+=i;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(i){if(e(typeof i=="number"),e(i<67108864),i<0)return this.iaddn(-i);if(this.negative!==0)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},o.prototype.addn=function(i){return this.clone().iaddn(i)},o.prototype.subn=function(i){return this.clone().isubn(i)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(i,u,l){var p=i.length+l,y;this._expand(p);var v,E=0;for(y=0;y<i.length;y++){v=(this.words[y+l]|0)+E;var m=(i.words[y]|0)*u;v-=m&67108863,E=(v>>26)-(m/67108864|0),this.words[y+l]=v&67108863}for(;y<this.length-l;y++)v=(this.words[y+l]|0)+E,E=v>>26,this.words[y+l]=v&67108863;if(E===0)return this._strip();for(e(E===-1),E=0,y=0;y<this.length;y++)v=-(this.words[y]|0)+E,E=v>>26,this.words[y]=v&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(i,u){var l=this.length-i.length,p=this.clone(),y=i,v=y.words[y.length-1]|0,E=this._countBits(v);l=26-E,l!==0&&(y=y.ushln(l),p.iushln(l),v=y.words[y.length-1]|0);var m=p.length-y.length,s;if(u!=="mod"){s=new o(null),s.length=m+1,s.words=new Array(s.length);for(var a=0;a<s.length;a++)s.words[a]=0}var d=p.clone()._ishlnsubmul(y,1,m);d.negative===0&&(p=d,s&&(s.words[m]=1));for(var w=m-1;w>=0;w--){var A=(p.words[y.length+w]|0)*67108864+(p.words[y.length+w-1]|0);for(A=Math.min(A/v|0,67108863),p._ishlnsubmul(y,A,w);p.negative!==0;)A--,p.negative=0,p._ishlnsubmul(y,1,w),p.isZero()||(p.negative^=1);s&&(s.words[w]=A)}return s&&s._strip(),p._strip(),u!=="div"&&l!==0&&p.iushrn(l),{div:s||null,mod:p}},o.prototype.divmod=function(i,u,l){if(e(!i.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var p,y,v;return this.negative!==0&&i.negative===0?(v=this.neg().divmod(i,u),u!=="mod"&&(p=v.div.neg()),u!=="div"&&(y=v.mod.neg(),l&&y.negative!==0&&y.iadd(i)),{div:p,mod:y}):this.negative===0&&i.negative!==0?(v=this.divmod(i.neg(),u),u!=="mod"&&(p=v.div.neg()),{div:p,mod:v.mod}):(this.negative&i.negative)!==0?(v=this.neg().divmod(i.neg(),u),u!=="div"&&(y=v.mod.neg(),l&&y.negative!==0&&y.isub(i)),{div:v.div,mod:y}):i.length>this.length||this.cmp(i)<0?{div:new o(0),mod:this}:i.length===1?u==="div"?{div:this.divn(i.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modrn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new o(this.modrn(i.words[0]))}:this._wordDiv(i,u)},o.prototype.div=function(i){return this.divmod(i,"div",!1).div},o.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},o.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},o.prototype.divRound=function(i){var u=this.divmod(i);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(i):u.mod,p=i.ushrn(1),y=i.andln(1),v=l.cmp(p);return v<0||y===1&&v===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modrn=function(i){var u=i<0;u&&(i=-i),e(i<=67108863);for(var l=(1<<26)%i,p=0,y=this.length-1;y>=0;y--)p=(l*p+(this.words[y]|0))%i;return u?-p:p},o.prototype.modn=function(i){return this.modrn(i)},o.prototype.idivn=function(i){var u=i<0;u&&(i=-i),e(i<=67108863);for(var l=0,p=this.length-1;p>=0;p--){var y=(this.words[p]|0)+l*67108864;this.words[p]=y/i|0,l=y%i}return this._strip(),u?this.ineg():this},o.prototype.divn=function(i){return this.clone().idivn(i)},o.prototype.egcd=function(i){e(i.negative===0),e(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var p=new o(1),y=new o(0),v=new o(0),E=new o(1),m=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++m;for(var s=l.clone(),a=u.clone();!u.isZero();){for(var d=0,w=1;(u.words[0]&w)===0&&d<26;++d,w<<=1);if(d>0)for(u.iushrn(d);d-- >0;)(p.isOdd()||y.isOdd())&&(p.iadd(s),y.isub(a)),p.iushrn(1),y.iushrn(1);for(var A=0,U=1;(l.words[0]&U)===0&&A<26;++A,U<<=1);if(A>0)for(l.iushrn(A);A-- >0;)(v.isOdd()||E.isOdd())&&(v.iadd(s),E.isub(a)),v.iushrn(1),E.iushrn(1);u.cmp(l)>=0?(u.isub(l),p.isub(v),y.isub(E)):(l.isub(u),v.isub(p),E.isub(y))}return{a:v,b:E,gcd:l.iushln(m)}},o.prototype._invmp=function(i){e(i.negative===0),e(!i.isZero());var u=this,l=i.clone();u.negative!==0?u=u.umod(i):u=u.clone();for(var p=new o(1),y=new o(0),v=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var E=0,m=1;(u.words[0]&m)===0&&E<26;++E,m<<=1);if(E>0)for(u.iushrn(E);E-- >0;)p.isOdd()&&p.iadd(v),p.iushrn(1);for(var s=0,a=1;(l.words[0]&a)===0&&s<26;++s,a<<=1);if(s>0)for(l.iushrn(s);s-- >0;)y.isOdd()&&y.iadd(v),y.iushrn(1);u.cmp(l)>=0?(u.isub(l),p.isub(y)):(l.isub(u),y.isub(p))}var d;return u.cmpn(1)===0?d=p:d=y,d.cmpn(0)<0&&d.iadd(i),d},o.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var u=this.clone(),l=i.clone();u.negative=0,l.negative=0;for(var p=0;u.isEven()&&l.isEven();p++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var y=u.cmp(l);if(y<0){var v=u;u=l,l=v}else if(y===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(p)},o.prototype.invm=function(i){return this.egcd(i).a.umod(i)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(i){return this.words[0]&i},o.prototype.bincn=function(i){e(typeof i=="number");var u=i%26,l=(i-u)/26,p=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=p,this;for(var y=p,v=l;y!==0&&v<this.length;v++){var E=this.words[v]|0;E+=y,y=E>>>26,E&=67108863,this.words[v]=E}return y!==0&&(this.words[v]=y,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(i){var u=i<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var l;if(this.length>1)l=1;else{u&&(i=-i),e(i<=67108863,"Number is too big");var p=this.words[0]|0;l=p===i?0:p<i?-1:1}return this.negative!==0?-l|0:l},o.prototype.cmp=function(i){if(this.negative!==0&&i.negative===0)return-1;if(this.negative===0&&i.negative!==0)return 1;var u=this.ucmp(i);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var p=this.words[l]|0,y=i.words[l]|0;if(p!==y){p<y?u=-1:p>y&&(u=1);break}}return u},o.prototype.gtn=function(i){return this.cmpn(i)===1},o.prototype.gt=function(i){return this.cmp(i)===1},o.prototype.gten=function(i){return this.cmpn(i)>=0},o.prototype.gte=function(i){return this.cmp(i)>=0},o.prototype.ltn=function(i){return this.cmpn(i)===-1},o.prototype.lt=function(i){return this.cmp(i)===-1},o.prototype.lten=function(i){return this.cmpn(i)<=0},o.prototype.lte=function(i){return this.cmp(i)<=0},o.prototype.eqn=function(i){return this.cmpn(i)===0},o.prototype.eq=function(i){return this.cmp(i)===0},o.red=function(i){return new T(i)},o.prototype.toRed=function(i){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),i.convertTo(this)._forceRed(i)},o.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(i){return this.red=i,this},o.prototype.forceRed=function(i){return e(!this.red,"Already a number in reduction context"),this._forceRed(i)},o.prototype.redAdd=function(i){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},o.prototype.redIAdd=function(i){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},o.prototype.redSub=function(i){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},o.prototype.redISub=function(i){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},o.prototype.redShl=function(i){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},o.prototype.redMul=function(i){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},o.prototype.redIMul=function(i){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},o.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(i){return e(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var X={k256:null,p224:null,p192:null,p25519:null};function G(h,i){this.name=h,this.p=new o(i,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var i=new o(null);return i.words=new Array(Math.ceil(this.n/13)),i},G.prototype.ireduce=function(i){var u=i,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var p=l<this.n?-1:u.ucmp(this.p);return p===0?(u.words[0]=0,u.length=1):p>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},G.prototype.split=function(i,u){i.iushrn(this.n,0,u)},G.prototype.imulK=function(i){return i.imul(this.k)};function tt(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(tt,G),tt.prototype.split=function(i,u){for(var l=4194303,p=Math.min(i.length,9),y=0;y<p;y++)u.words[y]=i.words[y];if(u.length=p,i.length<=9){i.words[0]=0,i.length=1;return}var v=i.words[9];for(u.words[u.length++]=v&l,y=10;y<i.length;y++){var E=i.words[y]|0;i.words[y-10]=(E&l)<<4|v>>>22,v=E}v>>>=22,i.words[y-10]=v,v===0&&i.length>10?i.length-=10:i.length-=9},tt.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var u=0,l=0;l<i.length;l++){var p=i.words[l]|0;u+=p*977,i.words[l]=u&67108863,u=p*64+(u/67108864|0)}return i.words[i.length-1]===0&&(i.length--,i.words[i.length-1]===0&&i.length--),i};function J(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(J,G);function M(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(M,G);function S(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(S,G),S.prototype.imulK=function(i){for(var u=0,l=0;l<i.length;l++){var p=(i.words[l]|0)*19+u,y=p&67108863;p>>>=26,i.words[l]=y,u=p}return u!==0&&(i.words[i.length++]=u),i},o._prime=function(i){if(X[i])return X[i];var u;if(i==="k256")u=new tt;else if(i==="p224")u=new J;else if(i==="p192")u=new M;else if(i==="p25519")u=new S;else throw new Error("Unknown prime "+i);return X[i]=u,u};function T(h){if(typeof h=="string"){var i=o._prime(h);this.m=i.p,this.prime=i}else e(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}T.prototype._verify1=function(i){e(i.negative===0,"red works only with positives"),e(i.red,"red works only with red numbers")},T.prototype._verify2=function(i,u){e((i.negative|u.negative)===0,"red works only with positives"),e(i.red&&i.red===u.red,"red works only with red numbers")},T.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):(L(i,i.umod(this.m)._forceRed(this)),i)},T.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},T.prototype.add=function(i,u){this._verify2(i,u);var l=i.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},T.prototype.iadd=function(i,u){this._verify2(i,u);var l=i.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},T.prototype.sub=function(i,u){this._verify2(i,u);var l=i.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},T.prototype.isub=function(i,u){this._verify2(i,u);var l=i.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},T.prototype.shl=function(i,u){return this._verify1(i),this.imod(i.ushln(u))},T.prototype.imul=function(i,u){return this._verify2(i,u),this.imod(i.imul(u))},T.prototype.mul=function(i,u){return this._verify2(i,u),this.imod(i.mul(u))},T.prototype.isqr=function(i){return this.imul(i,i.clone())},T.prototype.sqr=function(i){return this.mul(i,i)},T.prototype.sqrt=function(i){if(i.isZero())return i.clone();var u=this.m.andln(3);if(e(u%2===1),u===3){var l=this.m.add(new o(1)).iushrn(2);return this.pow(i,l)}for(var p=this.m.subn(1),y=0;!p.isZero()&&p.andln(1)===0;)y++,p.iushrn(1);e(!p.isZero());var v=new o(1).toRed(this),E=v.redNeg(),m=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new o(2*s*s).toRed(this);this.pow(s,m).cmp(E)!==0;)s.redIAdd(E);for(var a=this.pow(s,p),d=this.pow(i,p.addn(1).iushrn(1)),w=this.pow(i,p),A=y;w.cmp(v)!==0;){for(var U=w,V=0;U.cmp(v)!==0;V++)U=U.redSqr();e(V<A);var Y=this.pow(a,new o(1).iushln(A-V-1));d=d.redMul(Y),a=Y.redSqr(),w=w.redMul(a),A=V}return d},T.prototype.invm=function(i){var u=i._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},T.prototype.pow=function(i,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return i.clone();var l=4,p=new Array(1<<l);p[0]=new o(1).toRed(this),p[1]=i;for(var y=2;y<p.length;y++)p[y]=this.mul(p[y-1],i);var v=p[0],E=0,m=0,s=u.bitLength()%26;for(s===0&&(s=26),y=u.length-1;y>=0;y--){for(var a=u.words[y],d=s-1;d>=0;d--){var w=a>>d&1;if(v!==p[0]&&(v=this.sqr(v)),w===0&&E===0){m=0;continue}E<<=1,E|=w,m++,!(m!==l&&(y!==0||d!==0))&&(v=this.mul(v,p[E]),m=0,E=0)}s=26}return v},T.prototype.convertTo=function(i){var u=i.umod(this.m);return u===i?u.clone():u},T.prototype.convertFrom=function(i){var u=i.clone();return u.red=null,u},o.mont=function(i){return new O(i)};function O(h){T.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(O,T),O.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},O.prototype.convertFrom=function(i){var u=this.imod(i.mul(this.rinv));return u.red=null,u},O.prototype.imul=function(i,u){if(i.isZero()||u.isZero())return i.words[0]=0,i.length=1,i;var l=i.imul(u),p=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=l.isub(p).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},O.prototype.mul=function(i,u){if(i.isZero()||u.isZero())return new o(0)._forceRed(this);var l=i.mul(u),p=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=l.isub(p).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},O.prototype.invm=function(i){var u=this.imod(i._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(t,ro)}(rn)),rn.exports}var io=_i();const ni=Ai(io);var ri,Wn,Xn=0,Jn=0;function so(t,n,r){var e=n&&r||0,c=n||new Array(16);t=t||{};var o=t.node||ri,f=t.clockseq!==void 0?t.clockseq:Wn;if(o==null||f==null){var x=t.random||(t.rng||ks)();o==null&&(o=ri=[x[0]|1,x[1],x[2],x[3],x[4],x[5]]),f==null&&(f=Wn=(x[6]<<8|x[7])&16383)}var g=t.msecs!==void 0?t.msecs:Date.now(),B=t.nsecs!==void 0?t.nsecs:Jn+1,L=g-Xn+(B-Jn)/1e4;if(L<0&&t.clockseq===void 0&&(f=f+1&16383),(L<0||g>Xn)&&t.nsecs===void 0&&(B=0),B>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Xn=g,Jn=B,Wn=f,g+=122192928e5;var F=((g&268435455)*1e4+B)%4294967296;c[e++]=F>>>24&255,c[e++]=F>>>16&255,c[e++]=F>>>8&255,c[e++]=F&255;var I=g/4294967296*1e4&268435455;c[e++]=I>>>8&255,c[e++]=I&255,c[e++]=I>>>24&15|16,c[e++]=I>>>16&255,c[e++]=f>>>8|128,c[e++]=f&255;for(var _=0;_<6;++_)c[e+_]=o[_];return n||vr(c)}function Ri(t){if(!br(t))throw TypeError("Invalid UUID");var n,r=new Uint8Array(16);return r[0]=(n=parseInt(t.slice(0,8),16))>>>24,r[1]=n>>>16&255,r[2]=n>>>8&255,r[3]=n&255,r[4]=(n=parseInt(t.slice(9,13),16))>>>8,r[5]=n&255,r[6]=(n=parseInt(t.slice(14,18),16))>>>8,r[7]=n&255,r[8]=(n=parseInt(t.slice(19,23),16))>>>8,r[9]=n&255,r[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=n/4294967296&255,r[12]=n>>>24&255,r[13]=n>>>16&255,r[14]=n>>>8&255,r[15]=n&255,r}function oo(t){t=unescape(encodeURIComponent(t));for(var n=[],r=0;r<t.length;++r)n.push(t.charCodeAt(r));return n}var ao="6ba7b810-9dad-11d1-80b4-00c04fd430c8",uo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ki(t,n,r){function e(c,o,f,x){if(typeof c=="string"&&(c=oo(c)),typeof o=="string"&&(o=Ri(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var g=new Uint8Array(16+c.length);if(g.set(o),g.set(c,o.length),g=r(g),g[6]=g[6]&15|n,g[8]=g[8]&63|128,f){x=x||0;for(var B=0;B<16;++B)f[x+B]=g[B];return f}return vr(g)}try{e.name=t}catch{}return e.DNS=ao,e.URL=uo,e}function co(t){if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(var r=0;r<n.length;++r)t[r]=n.charCodeAt(r)}return fo(lo(ho(t),t.length*8))}function fo(t){for(var n=[],r=t.length*32,e="0123456789abcdef",c=0;c<r;c+=8){var o=t[c>>5]>>>c%32&255,f=parseInt(e.charAt(o>>>4&15)+e.charAt(o&15),16);n.push(f)}return n}function Ti(t){return(t+64>>>9<<4)+14+1}function lo(t,n){t[n>>5]|=128<<n%32,t[Ti(n)-1]=n;for(var r=1732584193,e=-271733879,c=-1732584194,o=271733878,f=0;f<t.length;f+=16){var x=r,g=e,B=c,L=o;r=Ht(r,e,c,o,t[f],7,-680876936),o=Ht(o,r,e,c,t[f+1],12,-389564586),c=Ht(c,o,r,e,t[f+2],17,606105819),e=Ht(e,c,o,r,t[f+3],22,-1044525330),r=Ht(r,e,c,o,t[f+4],7,-176418897),o=Ht(o,r,e,c,t[f+5],12,1200080426),c=Ht(c,o,r,e,t[f+6],17,-1473231341),e=Ht(e,c,o,r,t[f+7],22,-45705983),r=Ht(r,e,c,o,t[f+8],7,1770035416),o=Ht(o,r,e,c,t[f+9],12,-1958414417),c=Ht(c,o,r,e,t[f+10],17,-42063),e=Ht(e,c,o,r,t[f+11],22,-1990404162),r=Ht(r,e,c,o,t[f+12],7,1804603682),o=Ht(o,r,e,c,t[f+13],12,-40341101),c=Ht(c,o,r,e,t[f+14],17,-1502002290),e=Ht(e,c,o,r,t[f+15],22,1236535329),r=Wt(r,e,c,o,t[f+1],5,-165796510),o=Wt(o,r,e,c,t[f+6],9,-1069501632),c=Wt(c,o,r,e,t[f+11],14,643717713),e=Wt(e,c,o,r,t[f],20,-373897302),r=Wt(r,e,c,o,t[f+5],5,-701558691),o=Wt(o,r,e,c,t[f+10],9,38016083),c=Wt(c,o,r,e,t[f+15],14,-660478335),e=Wt(e,c,o,r,t[f+4],20,-405537848),r=Wt(r,e,c,o,t[f+9],5,568446438),o=Wt(o,r,e,c,t[f+14],9,-1019803690),c=Wt(c,o,r,e,t[f+3],14,-187363961),e=Wt(e,c,o,r,t[f+8],20,1163531501),r=Wt(r,e,c,o,t[f+13],5,-1444681467),o=Wt(o,r,e,c,t[f+2],9,-51403784),c=Wt(c,o,r,e,t[f+7],14,1735328473),e=Wt(e,c,o,r,t[f+12],20,-1926607734),r=Xt(r,e,c,o,t[f+5],4,-378558),o=Xt(o,r,e,c,t[f+8],11,-2022574463),c=Xt(c,o,r,e,t[f+11],16,1839030562),e=Xt(e,c,o,r,t[f+14],23,-35309556),r=Xt(r,e,c,o,t[f+1],4,-1530992060),o=Xt(o,r,e,c,t[f+4],11,1272893353),c=Xt(c,o,r,e,t[f+7],16,-155497632),e=Xt(e,c,o,r,t[f+10],23,-1094730640),r=Xt(r,e,c,o,t[f+13],4,681279174),o=Xt(o,r,e,c,t[f],11,-358537222),c=Xt(c,o,r,e,t[f+3],16,-722521979),e=Xt(e,c,o,r,t[f+6],23,76029189),r=Xt(r,e,c,o,t[f+9],4,-640364487),o=Xt(o,r,e,c,t[f+12],11,-421815835),c=Xt(c,o,r,e,t[f+15],16,530742520),e=Xt(e,c,o,r,t[f+2],23,-995338651),r=Jt(r,e,c,o,t[f],6,-198630844),o=Jt(o,r,e,c,t[f+7],10,1126891415),c=Jt(c,o,r,e,t[f+14],15,-1416354905),e=Jt(e,c,o,r,t[f+5],21,-57434055),r=Jt(r,e,c,o,t[f+12],6,1700485571),o=Jt(o,r,e,c,t[f+3],10,-1894986606),c=Jt(c,o,r,e,t[f+10],15,-1051523),e=Jt(e,c,o,r,t[f+1],21,-2054922799),r=Jt(r,e,c,o,t[f+8],6,1873313359),o=Jt(o,r,e,c,t[f+15],10,-30611744),c=Jt(c,o,r,e,t[f+6],15,-1560198380),e=Jt(e,c,o,r,t[f+13],21,1309151649),r=Jt(r,e,c,o,t[f+4],6,-145523070),o=Jt(o,r,e,c,t[f+11],10,-1120210379),c=Jt(c,o,r,e,t[f+2],15,718787259),e=Jt(e,c,o,r,t[f+9],21,-343485551),r=be(r,x),e=be(e,g),c=be(c,B),o=be(o,L)}return[r,e,c,o]}function ho(t){if(t.length===0)return[];for(var n=t.length*8,r=new Uint32Array(Ti(n)),e=0;e<n;e+=8)r[e>>5]|=(t[e/8]&255)<<e%32;return r}function be(t,n){var r=(t&65535)+(n&65535),e=(t>>16)+(n>>16)+(r>>16);return e<<16|r&65535}function po(t,n){return t<<n|t>>>32-n}function xn(t,n,r,e,c,o){return be(po(be(be(n,t),be(e,o)),c),r)}function Ht(t,n,r,e,c,o,f){return xn(n&r|~n&e,t,n,c,o,f)}function Wt(t,n,r,e,c,o,f){return xn(n&e|r&~e,t,n,c,o,f)}function Xt(t,n,r,e,c,o,f){return xn(n^r^e,t,n,c,o,f)}function Jt(t,n,r,e,c,o,f){return xn(r^(n|~e),t,n,c,o,f)}var go=ki("v3",48,co);function mo(t,n,r,e){switch(t){case 0:return n&r^~n&e;case 1:return n^r^e;case 2:return n&r^n&e^r&e;case 3:return n^r^e}}function Qn(t,n){return t<<n|t>>>32-n}function yo(t){var n=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=[];for(var c=0;c<e.length;++c)t.push(e.charCodeAt(c))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,f=Math.ceil(o/16),x=new Array(f),g=0;g<f;++g){for(var B=new Uint32Array(16),L=0;L<16;++L)B[L]=t[g*64+L*4]<<24|t[g*64+L*4+1]<<16|t[g*64+L*4+2]<<8|t[g*64+L*4+3];x[g]=B}x[f-1][14]=(t.length-1)*8/Math.pow(2,32),x[f-1][14]=Math.floor(x[f-1][14]),x[f-1][15]=(t.length-1)*8&4294967295;for(var F=0;F<f;++F){for(var I=new Uint32Array(80),_=0;_<16;++_)I[_]=x[F][_];for(var C=16;C<80;++C)I[C]=Qn(I[C-3]^I[C-8]^I[C-14]^I[C-16],1);for(var z=r[0],K=r[1],N=r[2],P=r[3],D=r[4],H=0;H<80;++H){var X=Math.floor(H/20),G=Qn(z,5)+mo(X,K,N,P)+D+n[X]+I[H]>>>0;D=P,P=N,N=Qn(K,30)>>>0,K=z,z=G}r[0]=r[0]+z>>>0,r[1]=r[1]+K>>>0,r[2]=r[2]+N>>>0,r[3]=r[3]+P>>>0,r[4]=r[4]+D>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var wo=ki("v5",80,yo);const vo="00000000-0000-0000-0000-000000000000";function bo(t){if(!br(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const xo=Object.freeze(Object.defineProperty({__proto__:null,NIL:vo,parse:Ri,stringify:vr,v1:so,v3:go,v4:Ts,v5:wo,validate:br,version:bo},Symbol.toStringTag,{value:"Module"}));class Eo extends Os{async init(n){}async getIdentityToken(){if(!this.provider||this.status!==ae.CONNECTED)throw ue.notConnectedError();if(!this.coreOptions)throw Qr.invalidParams("Please initialize Web3Auth with a valid options");const n=await this.provider.request({method:Gn.GET_ACCOUNTS});if(n&&n.length>0){const r=Ls(n[0],this.name);if(r&&!Us(r))return{idToken:r};const e=await this.provider.request({method:"solana_chainId"}),c=this.coreOptions.chains.find(L=>L.chainId===e);if(!c)throw Qr.invalidParams("chainConfig is required before authentication");const{chainNamespace:o}=c,f={domain:window.location.origin,uri:window.location.href,address:n[0],chainId:parseInt(e,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},x=await Cs(f,o),g=await this.provider.request({method:Gn.SIGN_MESSAGE,params:{data:x,display:"utf8"}}),B=await Ns(o,g,x,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return zs(n[0],this.name,B),{idToken:B}}throw ue.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const n=await this.provider.request({method:Gn.GET_ACCOUNTS});n&&n.length>0&&qs(n[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(Ee.DISCONNECTED)}}var Mo=function(t,n,r,e){if(r==="a"&&!e)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!e:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?e:r==="a"?e.call(t):e?e.value:n.get(t)},So=function(t,n,r,e,c){if(e==="m")throw new TypeError("Private method is not writable");if(e==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!c:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e==="a"?c.call(t,r):c?c.value=r:n.set(t,r),r},sn;let $e;const En=new Set;function Bo(t){je=void 0,En.add(t)}function Ao(t){je=void 0,En.delete(t)}const Le={};function Ju(){if($e||($e=Object.freeze({register:ii,get:Io,on:_o}),typeof window>"u"))return $e;const t=Object.freeze({register:ii});try{window.addEventListener("wallet-standard:register-wallet",({detail:n})=>n(t))}catch(n){console.error(`wallet-standard:register-wallet event listener could not be added
`,n)}try{window.dispatchEvent(new Ro(t))}catch(n){console.error(`wallet-standard:app-ready event could not be dispatched
`,n)}return $e}function ii(...t){var n;return t=t.filter(r=>!En.has(r)),t.length?(t.forEach(r=>Bo(r)),(n=Le.register)==null||n.forEach(r=>si(()=>r(...t))),function(){var e;t.forEach(c=>Ao(c)),(e=Le.unregister)==null||e.forEach(c=>si(()=>c(...t)))}):()=>{}}let je;function Io(){return je||(je=[...En]),je}function _o(t,n){var r;return(r=Le[t])!=null&&r.push(n)||(Le[t]=[n]),function(){var c;Le[t]=(c=Le[t])==null?void 0:c.filter(o=>n!==o)}}function si(t){try{t()}catch(n){console.error(n)}}class Ro extends Event{get detail(){return Mo(this,sn,"f")}get type(){return"wallet-standard:app-ready"}constructor(n){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),sn.set(this,void 0),So(this,sn,n,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}sn=new WeakMap;const Oi="solana:signAndSendTransaction",Li="solana:signMessage",hr="solana:signTransaction",Ui="standard:connect",ko="standard:disconnect";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Er=BigInt(0),dr=BigInt(1);function Ie(t,n=""){if(typeof t!="boolean"){const r=n&&`"${n}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function ie(t,n,r=""){const e=bn(t),c=t==null?void 0:t.length,o=n!==void 0;if(!e||o&&c!==n){const f=r&&`"${r}" `,x=o?` of length ${n}`:"",g=e?`length=${c}`:`type=${typeof t}`;throw new Error(f+"expected Uint8Array"+x+", got "+g)}return t}function en(t){const n=t.toString(16);return n.length&1?"0"+n:n}function Ci(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Er:BigInt("0x"+t)}function Mn(t){return Ci(Ae(t))}function Ye(t){return Fs(t),Ci(Ae(Uint8Array.from(t).reverse()))}function Mr(t,n){return un(t.toString(16).padStart(n*2,"0"))}function Ni(t,n){return Mr(t,n).reverse()}function ft(t,n,r){let e;if(typeof n=="string")try{e=un(n)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(bn(n))e=Uint8Array.from(n);else throw new Error(t+" must be hex string or Uint8Array");const c=e.length;if(typeof r=="number"&&c!==r)throw new Error(t+" of length "+r+" expected, got "+c);return e}function oi(t){return Uint8Array.from(t)}const tr=t=>typeof t=="bigint"&&Er<=t;function To(t,n,r){return tr(t)&&tr(n)&&tr(r)&&n<=t&&t<r}function pr(t,n,r,e){if(!To(n,r,e))throw new Error("expected valid "+t+": "+r+" <= n < "+e+", got "+n)}function zi(t){let n;for(n=0;t>Er;t>>=dr,n+=1);return n}const He=t=>(dr<<BigInt(t))-dr;function Oo(t,n,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const e=_=>new Uint8Array(_),c=_=>Uint8Array.of(_);let o=e(t),f=e(t),x=0;const g=()=>{o.fill(1),f.fill(0),x=0},B=(..._)=>r(f,o,..._),L=(_=e(0))=>{f=B(c(0),_),o=B(),_.length!==0&&(f=B(c(1),_),o=B())},F=()=>{if(x++>=1e3)throw new Error("drbg: tried 1000 values");let _=0;const C=[];for(;_<n;){o=B();const z=o.slice();C.push(z),_+=o.length}return fe(...C)};return(_,C)=>{g(),L(_);let z;for(;!(z=C(F()));)L();return g(),z}}function We(t,n,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function e(c,o,f){const x=t[c];if(f&&x===void 0)return;const g=typeof x;if(g!==o||x===null)throw new Error(`param "${c}" is invalid: expected ${o}, got ${g}`)}Object.entries(n).forEach(([c,o])=>e(c,o,!1)),Object.entries(r).forEach(([c,o])=>e(c,o,!0))}function cn(t){const n=new WeakMap;return(r,...e)=>{const c=n.get(r);if(c!==void 0)return c;const o=t(r,...e);return n.set(r,o),o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const te=BigInt(0),Gt=BigInt(1),Me=BigInt(2),qi=BigInt(3),Fi=BigInt(4),Di=BigInt(5),Lo=BigInt(7),Ki=BigInt(8),Uo=BigInt(9),Pi=BigInt(16);function jt(t,n){const r=t%n;return r>=te?r:n+r}function ct(t,n,r){let e=t;for(;n-- >te;)e*=e,e%=r;return e}function ai(t,n){if(t===te)throw new Error("invert: expected non-zero number");if(n<=te)throw new Error("invert: expected positive modulus, got "+n);let r=jt(t,n),e=n,c=te,o=Gt;for(;r!==te;){const x=e/r,g=e%r,B=c-o*x;e=r,r=g,c=o,o=B}if(e!==Gt)throw new Error("invert: does not exist");return jt(c,n)}function Sr(t,n,r){if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root")}function Zi(t,n){const r=(t.ORDER+Gt)/Fi,e=t.pow(n,r);return Sr(t,e,n),e}function Co(t,n){const r=(t.ORDER-Di)/Ki,e=t.mul(n,Me),c=t.pow(e,r),o=t.mul(n,c),f=t.mul(t.mul(o,Me),c),x=t.mul(o,t.sub(f,t.ONE));return Sr(t,x,n),x}function No(t){const n=_e(t),r=Vi(t),e=r(n,n.neg(n.ONE)),c=r(n,e),o=r(n,n.neg(e)),f=(t+Lo)/Pi;return(x,g)=>{let B=x.pow(g,f),L=x.mul(B,e);const F=x.mul(B,c),I=x.mul(B,o),_=x.eql(x.sqr(L),g),C=x.eql(x.sqr(F),g);B=x.cmov(B,L,_),L=x.cmov(I,F,C);const z=x.eql(x.sqr(L),g),K=x.cmov(B,L,z);return Sr(x,K,g),K}}function Vi(t){if(t<qi)throw new Error("sqrt is not defined for small field");let n=t-Gt,r=0;for(;n%Me===te;)n/=Me,r++;let e=Me;const c=_e(t);for(;ui(c,e)===1;)if(e++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Zi;let o=c.pow(e,n);const f=(n+Gt)/Me;return function(g,B){if(g.is0(B))return B;if(ui(g,B)!==1)throw new Error("Cannot find square root");let L=r,F=g.mul(g.ONE,o),I=g.pow(B,n),_=g.pow(B,f);for(;!g.eql(I,g.ONE);){if(g.is0(I))return g.ZERO;let C=1,z=g.sqr(I);for(;!g.eql(z,g.ONE);)if(C++,z=g.sqr(z),C===L)throw new Error("Cannot find square root");const K=Gt<<BigInt(L-C-1),N=g.pow(F,K);L=C,F=g.sqr(N),I=g.mul(I,F),_=g.mul(_,N)}return _}}function zo(t){return t%Fi===qi?Zi:t%Ki===Di?Co:t%Pi===Uo?No(t):Vi(t)}const qo=(t,n)=>(jt(t,n)&Gt)===Gt,Fo=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Do(t){const n={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Fo.reduce((e,c)=>(e[c]="function",e),n);return We(t,r),t}function Ko(t,n,r){if(r<te)throw new Error("invalid exponent, negatives unsupported");if(r===te)return t.ONE;if(r===Gt)return n;let e=t.ONE,c=n;for(;r>te;)r&Gt&&(e=t.mul(e,c)),c=t.sqr(c),r>>=Gt;return e}function $i(t,n,r=!1){const e=new Array(n.length).fill(r?t.ZERO:void 0),c=n.reduce((f,x,g)=>t.is0(x)?f:(e[g]=f,t.mul(f,x)),t.ONE),o=t.inv(c);return n.reduceRight((f,x,g)=>t.is0(x)?f:(e[g]=t.mul(f,e[g]),t.mul(f,x)),o),e}function ui(t,n){const r=(t.ORDER-Gt)/Me,e=t.pow(n,r),c=t.eql(e,t.ONE),o=t.eql(e,t.ZERO),f=t.eql(e,t.neg(t.ONE));if(!c&&!o&&!f)throw new Error("invalid Legendre symbol result");return c?1:o?0:-1}function ji(t,n){n!==void 0&&Ds(n);const r=n!==void 0?n:t.toString(2).length,e=Math.ceil(r/8);return{nBitLength:r,nByteLength:e}}function _e(t,n,r=!1,e={}){if(t<=te)throw new Error("invalid field: expected ORDER > 0, got "+t);let c,o,f=!1,x;if(typeof n=="object"&&n!=null){if(e.sqrt||r)throw new Error("cannot specify opts in two arguments");const I=n;I.BITS&&(c=I.BITS),I.sqrt&&(o=I.sqrt),typeof I.isLE=="boolean"&&(r=I.isLE),typeof I.modFromBytes=="boolean"&&(f=I.modFromBytes),x=I.allowedLengths}else typeof n=="number"&&(c=n),e.sqrt&&(o=e.sqrt);const{nBitLength:g,nByteLength:B}=ji(t,c);if(B>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let L;const F=Object.freeze({ORDER:t,isLE:r,BITS:g,BYTES:B,MASK:He(g),ZERO:te,ONE:Gt,allowedLengths:x,create:I=>jt(I,t),isValid:I=>{if(typeof I!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof I);return te<=I&&I<t},is0:I=>I===te,isValidNot0:I=>!F.is0(I)&&F.isValid(I),isOdd:I=>(I&Gt)===Gt,neg:I=>jt(-I,t),eql:(I,_)=>I===_,sqr:I=>jt(I*I,t),add:(I,_)=>jt(I+_,t),sub:(I,_)=>jt(I-_,t),mul:(I,_)=>jt(I*_,t),pow:(I,_)=>Ko(F,I,_),div:(I,_)=>jt(I*ai(_,t),t),sqrN:I=>I*I,addN:(I,_)=>I+_,subN:(I,_)=>I-_,mulN:(I,_)=>I*_,inv:I=>ai(I,t),sqrt:o||(I=>(L||(L=zo(t)),L(F,I))),toBytes:I=>r?Ni(I,B):Mr(I,B),fromBytes:(I,_=!0)=>{if(x){if(!x.includes(I.length)||I.length>B)throw new Error("Field.fromBytes: expected "+x+" bytes, got "+I.length);const z=new Uint8Array(B);z.set(I,r?0:z.length-I.length),I=z}if(I.length!==B)throw new Error("Field.fromBytes: expected "+B+" bytes, got "+I.length);let C=r?Ye(I):Mn(I);if(f&&(C=jt(C,t)),!_&&!F.isValid(C))throw new Error("invalid field element: outside of range 0..ORDER");return C},invertBatch:I=>$i(F,I),cmov:(I,_,C)=>C?_:I});return Object.freeze(F)}function Yi(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const n=t.toString(2).length;return Math.ceil(n/8)}function Gi(t){const n=Yi(t);return n+Math.ceil(n/2)}function Po(t,n,r=!1){const e=t.length,c=Yi(n),o=Gi(n);if(e<16||e<o||e>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+e);const f=r?Ye(t):Mn(t),x=jt(f,n-Gt)+Gt;return r?Ni(x,c):Mr(x,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fe=BigInt(0),Se=BigInt(1);function fn(t,n){const r=n.negate();return t?r:n}function Be(t,n){const r=$i(t.Fp,n.map(e=>e.Z));return n.map((e,c)=>t.fromAffine(e.toAffine(r[c])))}function Hi(t,n){if(!Number.isSafeInteger(t)||t<=0||t>n)throw new Error("invalid window size, expected [1.."+n+"], got W="+t)}function er(t,n){Hi(t,n);const r=Math.ceil(n/t)+1,e=2**(t-1),c=2**t,o=He(t),f=BigInt(t);return{windows:r,windowSize:e,mask:o,maxNumber:c,shiftBy:f}}function ci(t,n,r){const{windowSize:e,mask:c,maxNumber:o,shiftBy:f}=r;let x=Number(t&c),g=t>>f;x>e&&(x-=o,g+=Se);const B=n*e,L=B+Math.abs(x)-1,F=x===0,I=x<0,_=n%2!==0;return{nextN:g,offset:L,isZero:F,isNeg:I,isNegF:_,offsetF:B}}function Zo(t,n){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,e)=>{if(!(r instanceof n))throw new Error("invalid point at index "+e)})}function Vo(t,n){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,e)=>{if(!n.isValid(r))throw new Error("invalid scalar at index "+e)})}const nr=new WeakMap,Wi=new WeakMap;function rr(t){return Wi.get(t)||1}function fi(t){if(t!==Fe)throw new Error("invalid wNAF")}class Xi{constructor(n,r){this.BASE=n.BASE,this.ZERO=n.ZERO,this.Fn=n.Fn,this.bits=r}_unsafeLadder(n,r,e=this.ZERO){let c=n;for(;r>Fe;)r&Se&&(e=e.add(c)),c=c.double(),r>>=Se;return e}precomputeWindow(n,r){const{windows:e,windowSize:c}=er(r,this.bits),o=[];let f=n,x=f;for(let g=0;g<e;g++){x=f,o.push(x);for(let B=1;B<c;B++)x=x.add(f),o.push(x);f=x.double()}return o}wNAF(n,r,e){if(!this.Fn.isValid(e))throw new Error("invalid scalar");let c=this.ZERO,o=this.BASE;const f=er(n,this.bits);for(let x=0;x<f.windows;x++){const{nextN:g,offset:B,isZero:L,isNeg:F,isNegF:I,offsetF:_}=ci(e,x,f);e=g,L?o=o.add(fn(I,r[_])):c=c.add(fn(F,r[B]))}return fi(e),{p:c,f:o}}wNAFUnsafe(n,r,e,c=this.ZERO){const o=er(n,this.bits);for(let f=0;f<o.windows&&e!==Fe;f++){const{nextN:x,offset:g,isZero:B,isNeg:L}=ci(e,f,o);if(e=x,!B){const F=r[g];c=c.add(L?F.negate():F)}}return fi(e),c}getPrecomputes(n,r,e){let c=nr.get(r);return c||(c=this.precomputeWindow(r,n),n!==1&&(typeof e=="function"&&(c=e(c)),nr.set(r,c))),c}cached(n,r,e){const c=rr(n);return this.wNAF(c,this.getPrecomputes(c,n,e),r)}unsafe(n,r,e,c){const o=rr(n);return o===1?this._unsafeLadder(n,r,c):this.wNAFUnsafe(o,this.getPrecomputes(o,n,e),r,c)}createCache(n,r){Hi(r,this.bits),Wi.set(n,r),nr.delete(n)}hasCache(n){return rr(n)!==1}}function $o(t,n,r,e){let c=n,o=t.ZERO,f=t.ZERO;for(;r>Fe||e>Fe;)r&Se&&(o=o.add(c)),e&Se&&(f=f.add(c)),c=c.double(),r>>=Se,e>>=Se;return{p1:o,p2:f}}function Ji(t,n,r,e){Zo(r,t),Vo(e,n);const c=r.length,o=e.length;if(c!==o)throw new Error("arrays of points and scalars must have equal length");const f=t.ZERO,x=zi(BigInt(c));let g=1;x>12?g=x-3:x>4?g=x-2:x>0&&(g=2);const B=He(g),L=new Array(Number(B)+1).fill(f),F=Math.floor((n.BITS-1)/g)*g;let I=f;for(let _=F;_>=0;_-=g){L.fill(f);for(let z=0;z<o;z++){const K=e[z],N=Number(K>>BigInt(_)&B);L[N]=L[N].add(r[z])}let C=f;for(let z=L.length-1,K=f;z>0;z--)K=K.add(L[z]),C=C.add(K);if(I=I.add(C),_!==0)for(let z=0;z<g;z++)I=I.double()}return I}function li(t,n,r){if(n){if(n.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Do(n),n}else return _e(t,{isLE:r})}function Qi(t,n,r={},e){if(e===void 0&&(e=t==="edwards"),!n||typeof n!="object")throw new Error(`expected valid ${t} CURVE object`);for(const g of["p","n","h"]){const B=n[g];if(!(typeof B=="bigint"&&B>Fe))throw new Error(`CURVE.${g} must be positive bigint`)}const c=li(n.p,r.Fp,e),o=li(n.n,r.Fn,e),x=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const g of x)if(!c.isValid(n[g]))throw new Error(`CURVE.${g} must be valid field element of CURVE.Fp`);return n=Object.freeze(Object.assign({},n)),{CURVE:n,Fp:c,Fn:o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ve=BigInt(0),Yt=BigInt(1),ir=BigInt(2),jo=BigInt(8);function Yo(t,n,r,e){const c=t.sqr(r),o=t.sqr(e),f=t.add(t.mul(n.a,c),o),x=t.add(t.ONE,t.mul(n.d,t.mul(c,o)));return t.eql(f,x)}function Go(t,n={}){const r=Qi("edwards",t,n,n.FpFnLE),{Fp:e,Fn:c}=r;let o=r.CURVE;const{h:f}=o;We(n,{},{uvRatio:"function"});const x=ir<<BigInt(c.BYTES*8)-Yt,g=K=>e.create(K),B=n.uvRatio||((K,N)=>{try{return{isValid:!0,value:e.sqrt(e.div(K,N))}}catch{return{isValid:!1,value:ve}}});if(!Yo(e,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function L(K,N,P=!1){const D=P?Yt:ve;return pr("coordinate "+K,N,D,x),N}function F(K){if(!(K instanceof C))throw new Error("ExtendedPoint expected")}const I=cn((K,N)=>{const{X:P,Y:D,Z:H}=K,X=K.is0();N==null&&(N=X?jo:e.inv(H));const G=g(P*N),tt=g(D*N),J=e.mul(H,N);if(X)return{x:ve,y:Yt};if(J!==Yt)throw new Error("invZ was invalid");return{x:G,y:tt}}),_=cn(K=>{const{a:N,d:P}=o;if(K.is0())throw new Error("bad point: ZERO");const{X:D,Y:H,Z:X,T:G}=K,tt=g(D*D),J=g(H*H),M=g(X*X),S=g(M*M),T=g(tt*N),O=g(M*g(T+J)),h=g(S+g(P*g(tt*J)));if(O!==h)throw new Error("bad point: equation left != right (1)");const i=g(D*H),u=g(X*G);if(i!==u)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(N,P,D,H){this.X=L("x",N),this.Y=L("y",P),this.Z=L("z",D,!0),this.T=L("t",H),Object.freeze(this)}static CURVE(){return o}static fromAffine(N){if(N instanceof C)throw new Error("extended point not allowed");const{x:P,y:D}=N||{};return L("x",P),L("y",D),new C(P,D,Yt,g(P*D))}static fromBytes(N,P=!1){const D=e.BYTES,{a:H,d:X}=o;N=oi(ie(N,D,"point")),Ie(P,"zip215");const G=oi(N),tt=N[D-1];G[D-1]=tt&-129;const J=Ye(G),M=P?x:e.ORDER;pr("point.y",J,ve,M);const S=g(J*J),T=g(S-Yt),O=g(X*S-H);let{isValid:h,value:i}=B(T,O);if(!h)throw new Error("bad point: invalid y coordinate");const u=(i&Yt)===Yt,l=(tt&128)!==0;if(!P&&i===ve&&l)throw new Error("bad point: x=0 and x_0=1");return l!==u&&(i=g(-i)),C.fromAffine({x:i,y:J})}static fromHex(N,P=!1){return C.fromBytes(ft("point",N),P)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(N=8,P=!0){return z.createCache(this,N),P||this.multiply(ir),this}assertValidity(){_(this)}equals(N){F(N);const{X:P,Y:D,Z:H}=this,{X,Y:G,Z:tt}=N,J=g(P*tt),M=g(X*H),S=g(D*tt),T=g(G*H);return J===M&&S===T}is0(){return this.equals(C.ZERO)}negate(){return new C(g(-this.X),this.Y,this.Z,g(-this.T))}double(){const{a:N}=o,{X:P,Y:D,Z:H}=this,X=g(P*P),G=g(D*D),tt=g(ir*g(H*H)),J=g(N*X),M=P+D,S=g(g(M*M)-X-G),T=J+G,O=T-tt,h=J-G,i=g(S*O),u=g(T*h),l=g(S*h),p=g(O*T);return new C(i,u,p,l)}add(N){F(N);const{a:P,d:D}=o,{X:H,Y:X,Z:G,T:tt}=this,{X:J,Y:M,Z:S,T}=N,O=g(H*J),h=g(X*M),i=g(tt*D*T),u=g(G*S),l=g((H+X)*(J+M)-O-h),p=u-i,y=u+i,v=g(h-P*O),E=g(l*p),m=g(y*v),s=g(l*v),a=g(p*y);return new C(E,m,a,s)}subtract(N){return this.add(N.negate())}multiply(N){if(!c.isValidNot0(N))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:P,f:D}=z.cached(this,N,H=>Be(C,H));return Be(C,[P,D])[0]}multiplyUnsafe(N,P=C.ZERO){if(!c.isValid(N))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return N===ve?C.ZERO:this.is0()||N===Yt?this:z.unsafe(this,N,D=>Be(C,D),P)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return z.unsafe(this,o.n).is0()}toAffine(N){return I(this,N)}clearCofactor(){return f===Yt?this:this.multiplyUnsafe(f)}toBytes(){const{x:N,y:P}=this.toAffine(),D=e.toBytes(P);return D[D.length-1]|=N&Yt?128:0,D}toHex(){return Ae(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(N){return Be(C,N)}static msm(N,P){return Ji(C,c,N,P)}_setWindowSize(N){this.precompute(N)}toRawBytes(){return this.toBytes()}}C.BASE=new C(o.Gx,o.Gy,Yt,g(o.Gx*o.Gy)),C.ZERO=new C(ve,Yt,Yt,ve),C.Fp=e,C.Fn=c;const z=new Xi(C,c.BITS);return C.BASE.precompute(8),C}function Ho(t,n,r={}){if(typeof n!="function")throw new Error('"hash" function param is required');We(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e}=r,{BASE:c,Fp:o,Fn:f}=t,x=r.randomBytes||xr,g=r.adjustScalarBytes||(M=>M),B=r.domain||((M,S,T)=>{if(Ie(T,"phflag"),S.length||T)throw new Error("Contexts/pre-hash are not supported");return M});function L(M){return f.create(Ye(M))}function F(M){const S=D.secretKey;M=ft("private key",M,S);const T=ft("hashed private key",n(M),2*S),O=g(T.slice(0,S)),h=T.slice(S,2*S),i=L(O);return{head:O,prefix:h,scalar:i}}function I(M){const{head:S,prefix:T,scalar:O}=F(M),h=c.multiply(O),i=h.toBytes();return{head:S,prefix:T,scalar:O,point:h,pointBytes:i}}function _(M){return I(M).pointBytes}function C(M=Uint8Array.of(),...S){const T=fe(...S);return L(n(B(T,ft("context",M),!!e)))}function z(M,S,T={}){M=ft("message",M),e&&(M=e(M));const{prefix:O,scalar:h,pointBytes:i}=I(S),u=C(T.context,O,M),l=c.multiply(u).toBytes(),p=C(T.context,l,i,M),y=f.create(u+p*h);if(!f.isValid(y))throw new Error("sign failed: invalid s");const v=fe(l,f.toBytes(y));return ie(v,D.signature,"result")}const K={zip215:!0};function N(M,S,T,O=K){const{context:h,zip215:i}=O,u=D.signature;M=ft("signature",M,u),S=ft("message",S),T=ft("publicKey",T,D.publicKey),i!==void 0&&Ie(i,"zip215"),e&&(S=e(S));const l=u/2,p=M.subarray(0,l),y=Ye(M.subarray(l,u));let v,E,m;try{v=t.fromBytes(T,i),E=t.fromBytes(p,i),m=c.multiplyUnsafe(y)}catch{return!1}if(!i&&v.isSmallOrder())return!1;const s=C(h,E.toBytes(),v.toBytes(),S);return E.add(v.multiplyUnsafe(s)).subtract(m).clearCofactor().is0()}const P=o.BYTES,D={secretKey:P,publicKey:P,signature:2*P,seed:P};function H(M=x(D.seed)){return ie(M,D.seed,"seed")}function X(M){const S=J.randomSecretKey(M);return{secretKey:S,publicKey:_(S)}}function G(M){return bn(M)&&M.length===f.BYTES}function tt(M,S){try{return!!t.fromBytes(M,S)}catch{return!1}}const J={getExtendedPublicKey:I,randomSecretKey:H,isValidSecretKey:G,isValidPublicKey:tt,toMontgomery(M){const{y:S}=t.fromBytes(M),T=D.publicKey,O=T===32;if(!O&&T!==57)throw new Error("only defined for 25519 and 448");const h=O?o.div(Yt+S,Yt-S):o.div(S-Yt,S+Yt);return o.toBytes(h)},toMontgomeryPriv(M){const S=D.secretKey;ie(M,S);const T=n(M.subarray(0,S));return g(T).subarray(0,S)},randomPrivateKey:H,precompute(M=8,S=t.BASE){return S.precompute(M,!1)}};return Object.freeze({keygen:X,getPublicKey:_,sign:z,verify:N,utils:J,Point:t,lengths:D})}function Wo(t){const n={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,e=_e(n.n,t.nBitLength,!0),c={Fp:r,Fn:e,uvRatio:t.uvRatio},o={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:n,curveOpts:c,hash:t.hash,eddsaOpts:o}}function Xo(t,n){const r=n.Point;return Object.assign({},n,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function Jo(t){const{CURVE:n,curveOpts:r,hash:e,eddsaOpts:c}=Wo(t),o=Go(n,r),f=Ho(o,e,c);return Xo(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qo=BigInt(1),hi=BigInt(2);BigInt(3);const ta=BigInt(5),ea=BigInt(8),Br=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),ts={p:Br,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ea,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function na(t){const n=BigInt(10),r=BigInt(20),e=BigInt(40),c=BigInt(80),o=Br,x=t*t%o*t%o,g=ct(x,hi,o)*x%o,B=ct(g,Qo,o)*t%o,L=ct(B,ta,o)*B%o,F=ct(L,n,o)*L%o,I=ct(F,r,o)*F%o,_=ct(I,e,o)*I%o,C=ct(_,c,o)*_%o,z=ct(C,c,o)*_%o,K=ct(z,n,o)*L%o;return{pow_p_5_8:ct(K,hi,o)*t%o,b2:x}}function ra(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const di=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function ia(t,n){const r=Br,e=jt(n*n*n,r),c=jt(e*e*n,r),o=na(t*c).pow_p_5_8;let f=jt(t*e*o,r);const x=jt(n*f*f,r),g=f,B=jt(f*di,r),L=x===t,F=x===jt(-t,r),I=x===jt(-t*di,r);return L&&(f=g),(F||I)&&(f=B),qo(f,r)&&(f=jt(-f,r)),{isValid:L||F,value:f}}const sa=_e(ts.p,{isLE:!0}),oa={...ts,Fp:sa,hash:Js,adjustScalarBytes:ra,uvRatio:ia},Xe=Jo(oa);var sr,pi;function aa(){if(pi)return sr;pi=1;var t=Ks().Buffer;function n(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),c=0;c<e.length;c++)e[c]=255;for(var o=0;o<r.length;o++){var f=r.charAt(o),x=f.charCodeAt(0);if(e[x]!==255)throw new TypeError(f+" is ambiguous");e[x]=o}var g=r.length,B=r.charAt(0),L=Math.log(g)/Math.log(256),F=Math.log(256)/Math.log(g);function I(z){if((Array.isArray(z)||z instanceof Uint8Array)&&(z=t.from(z)),!t.isBuffer(z))throw new TypeError("Expected Buffer");if(z.length===0)return"";for(var K=0,N=0,P=0,D=z.length;P!==D&&z[P]===0;)P++,K++;for(var H=(D-P)*F+1>>>0,X=new Uint8Array(H);P!==D;){for(var G=z[P],tt=0,J=H-1;(G!==0||tt<N)&&J!==-1;J--,tt++)G+=256*X[J]>>>0,X[J]=G%g>>>0,G=G/g>>>0;if(G!==0)throw new Error("Non-zero carry");N=tt,P++}for(var M=H-N;M!==H&&X[M]===0;)M++;for(var S=B.repeat(K);M<H;++M)S+=r.charAt(X[M]);return S}function _(z){if(typeof z!="string")throw new TypeError("Expected String");if(z.length===0)return t.alloc(0);for(var K=0,N=0,P=0;z[K]===B;)N++,K++;for(var D=(z.length-K)*L+1>>>0,H=new Uint8Array(D);K<z.length;){var X=z.charCodeAt(K);if(X>255)return;var G=e[X];if(G===255)return;for(var tt=0,J=D-1;(G!==0||tt<P)&&J!==-1;J--,tt++)G+=g*H[J]>>>0,H[J]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");P=tt,K++}for(var M=D-P;M!==D&&H[M]===0;)M++;var S=t.allocUnsafe(N+(D-M));S.fill(0,0,N);for(var T=N;M!==D;)S[T++]=H[M++];return S}function C(z){var K=_(z);if(K)return K;throw new Error("Non-base"+g+" character")}return{encode:I,decodeUnsafe:_,decode:C}}return sr=n,sr}var or,gi;function es(){if(gi)return or;gi=1;var t=aa(),n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return or=t(n),or}var ua=es();const ce=Ai(ua);var rt={};function ge(t,n,r){return n<=t&&t<=r}function Sn(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function ca(t){for(var n=String(t),r=n.length,e=0,c=[];e<r;){var o=n.charCodeAt(e);if(o<55296||o>57343)c.push(o);else if(56320<=o&&o<=57343)c.push(65533);else if(55296<=o&&o<=56319)if(e===r-1)c.push(65533);else{var f=t.charCodeAt(e+1);if(56320<=f&&f<=57343){var x=o&1023,g=f&1023;c.push(65536+(x<<10)+g),e+=1}else c.push(65533)}e+=1}return c}function fa(t){for(var n="",r=0;r<t.length;++r){var e=t[r];e<=65535?n+=String.fromCharCode(e):(e-=65536,n+=String.fromCharCode((e>>10)+55296,(e&1023)+56320))}return n}var ln=-1;function Ar(t){this.tokens=[].slice.call(t)}Ar.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ln},prepend:function(t){if(Array.isArray(t))for(var n=t;n.length;)this.tokens.unshift(n.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var n=t;n.length;)this.tokens.push(n.shift());else this.tokens.push(t)}};var De=-1;function ar(t,n){if(t)throw TypeError("Decoder error");return n||65533}var hn="utf-8";function dn(t,n){if(!(this instanceof dn))return new dn(t,n);if(t=t!==void 0?String(t).toLowerCase():hn,t!==hn)throw new Error("Encoding not supported. Only utf-8 is supported");n=Sn(n),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!n.fatal,this._ignoreBOM=!!n.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}dn.prototype={decode:function(n,r){var e;typeof n=="object"&&n instanceof ArrayBuffer?e=new Uint8Array(n):typeof n=="object"&&"buffer"in n&&n.buffer instanceof ArrayBuffer?e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength):e=new Uint8Array(0),r=Sn(r),this._streaming||(this._decoder=new la({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var c=new Ar(e),o=[],f;!c.endOfStream()&&(f=this._decoder.handler(c,c.read()),f!==De);)f!==null&&(Array.isArray(f)?o.push.apply(o,f):o.push(f));if(!this._streaming){do{if(f=this._decoder.handler(c,c.read()),f===De)break;f!==null&&(Array.isArray(f)?o.push.apply(o,f):o.push(f))}while(!c.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),fa(o)}};function pn(t,n){if(!(this instanceof pn))return new pn(t,n);if(t=t!==void 0?String(t).toLowerCase():hn,t!==hn)throw new Error("Encoding not supported. Only utf-8 is supported");n=Sn(n),this._streaming=!1,this._encoder=null,this._options={fatal:!!n.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}pn.prototype={encode:function(n,r){n=n?String(n):"",r=Sn(r),this._streaming||(this._encoder=new ha(this._options)),this._streaming=!!r.stream;for(var e=[],c=new Ar(ca(n)),o;!c.endOfStream()&&(o=this._encoder.handler(c,c.read()),o!==De);)Array.isArray(o)?e.push.apply(e,o):e.push(o);if(!this._streaming){for(;o=this._encoder.handler(c,c.read()),o!==De;)Array.isArray(o)?e.push.apply(e,o):e.push(o);this._encoder=null}return new Uint8Array(e)}};function la(t){var n=t.fatal,r=0,e=0,c=0,o=128,f=191;this.handler=function(x,g){if(g===ln&&c!==0)return c=0,ar(n);if(g===ln)return De;if(c===0){if(ge(g,0,127))return g;if(ge(g,194,223))c=1,r=g-192;else if(ge(g,224,239))g===224&&(o=160),g===237&&(f=159),c=2,r=g-224;else if(ge(g,240,244))g===240&&(o=144),g===244&&(f=143),c=3,r=g-240;else return ar(n);return r=r<<6*c,null}if(!ge(g,o,f))return r=c=e=0,o=128,f=191,x.prepend(g),ar(n);if(o=128,f=191,e+=1,r+=g-128<<6*(c-e),e!==c)return null;var B=r;return r=c=e=0,B}}function ha(t){t.fatal,this.handler=function(n,r){if(r===ln)return De;if(ge(r,0,127))return r;var e,c;ge(r,128,2047)?(e=1,c=192):ge(r,2048,65535)?(e=2,c=224):ge(r,65536,1114111)&&(e=3,c=240);for(var o=[(r>>6*e)+c];e>0;){var f=r>>6*(e-1);o.push(128|f&63),e-=1}return o}}const da=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:dn,TextEncoder:pn},Symbol.toStringTag,{value:"Module"})),pa=Ii(da);var mi;function ga(){if(mi)return rt;mi=1;var t=rt&&rt.__createBinding||(Object.create?function(M,S,T,O){O===void 0&&(O=T),Object.defineProperty(M,O,{enumerable:!0,get:function(){return S[T]}})}:function(M,S,T,O){O===void 0&&(O=T),M[O]=S[T]}),n=rt&&rt.__setModuleDefault||(Object.create?function(M,S){Object.defineProperty(M,"default",{enumerable:!0,value:S})}:function(M,S){M.default=S}),r=rt&&rt.__decorate||function(M,S,T,O){var h=arguments.length,i=h<3?S:O===null?O=Object.getOwnPropertyDescriptor(S,T):O,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(M,S,T,O);else for(var l=M.length-1;l>=0;l--)(u=M[l])&&(i=(h<3?u(i):h>3?u(S,T,i):u(S,T))||i);return h>3&&i&&Object.defineProperty(S,T,i),i},e=rt&&rt.__importStar||function(M){if(M&&M.__esModule)return M;var S={};if(M!=null)for(var T in M)T!=="default"&&Object.hasOwnProperty.call(M,T)&&t(S,M,T);return n(S,M),S},c=rt&&rt.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(rt,"__esModule",{value:!0}),rt.deserializeUnchecked=rt.deserialize=rt.serialize=rt.BinaryReader=rt.BinaryWriter=rt.BorshError=rt.baseDecode=rt.baseEncode=void 0;const o=c(_i()),f=c(es()),x=e(pa),g=typeof TextDecoder!="function"?x.TextDecoder:TextDecoder,B=new g("utf-8",{fatal:!0});function L(M){return typeof M=="string"&&(M=Buffer.from(M,"utf8")),f.default.encode(Buffer.from(M))}rt.baseEncode=L;function F(M){return Buffer.from(f.default.decode(M))}rt.baseDecode=F;const I=1024;class _ extends Error{constructor(S){super(S),this.fieldPath=[],this.originalMessage=S}addToFieldPath(S){this.fieldPath.splice(0,0,S),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}rt.BorshError=_;class C{constructor(){this.buf=Buffer.alloc(I),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(I)]))}writeU8(S){this.maybeResize(),this.buf.writeUInt8(S,this.length),this.length+=1}writeU16(S){this.maybeResize(),this.buf.writeUInt16LE(S,this.length),this.length+=2}writeU32(S){this.maybeResize(),this.buf.writeUInt32LE(S,this.length),this.length+=4}writeU64(S){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(S).toArray("le",8)))}writeU128(S){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(S).toArray("le",16)))}writeU256(S){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(S).toArray("le",32)))}writeU512(S){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(S).toArray("le",64)))}writeBuffer(S){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),S,Buffer.alloc(I)]),this.length+=S.length}writeString(S){this.maybeResize();const T=Buffer.from(S,"utf8");this.writeU32(T.length),this.writeBuffer(T)}writeFixedArray(S){this.writeBuffer(Buffer.from(S))}writeArray(S,T){this.maybeResize(),this.writeU32(S.length);for(const O of S)this.maybeResize(),T(O)}toArray(){return this.buf.subarray(0,this.length)}}rt.BinaryWriter=C;function z(M,S,T){const O=T.value;T.value=function(...h){try{return O.apply(this,h)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new _("Reached the end of buffer when deserializing")}throw i}}}class K{constructor(S){this.buf=S,this.offset=0}readU8(){const S=this.buf.readUInt8(this.offset);return this.offset+=1,S}readU16(){const S=this.buf.readUInt16LE(this.offset);return this.offset+=2,S}readU32(){const S=this.buf.readUInt32LE(this.offset);return this.offset+=4,S}readU64(){const S=this.readBuffer(8);return new o.default(S,"le")}readU128(){const S=this.readBuffer(16);return new o.default(S,"le")}readU256(){const S=this.readBuffer(32);return new o.default(S,"le")}readU512(){const S=this.readBuffer(64);return new o.default(S,"le")}readBuffer(S){if(this.offset+S>this.buf.length)throw new _(`Expected buffer length ${S} isn't within bounds`);const T=this.buf.slice(this.offset,this.offset+S);return this.offset+=S,T}readString(){const S=this.readU32(),T=this.readBuffer(S);try{return B.decode(T)}catch(O){throw new _(`Error decoding UTF-8 string: ${O}`)}}readFixedArray(S){return new Uint8Array(this.readBuffer(S))}readArray(S){const T=this.readU32(),O=Array();for(let h=0;h<T;++h)O.push(S());return O}}r([z],K.prototype,"readU8",null),r([z],K.prototype,"readU16",null),r([z],K.prototype,"readU32",null),r([z],K.prototype,"readU64",null),r([z],K.prototype,"readU128",null),r([z],K.prototype,"readU256",null),r([z],K.prototype,"readU512",null),r([z],K.prototype,"readString",null),r([z],K.prototype,"readFixedArray",null),r([z],K.prototype,"readArray",null),rt.BinaryReader=K;function N(M){return M.charAt(0).toUpperCase()+M.slice(1)}function P(M,S,T,O,h){try{if(typeof O=="string")h[`write${N(O)}`](T);else if(O instanceof Array)if(typeof O[0]=="number"){if(T.length!==O[0])throw new _(`Expecting byte array of length ${O[0]}, but got ${T.length} bytes`);h.writeFixedArray(T)}else if(O.length===2&&typeof O[1]=="number"){if(T.length!==O[1])throw new _(`Expecting byte array of length ${O[1]}, but got ${T.length} bytes`);for(let i=0;i<O[1];i++)P(M,null,T[i],O[0],h)}else h.writeArray(T,i=>{P(M,S,i,O[0],h)});else if(O.kind!==void 0)switch(O.kind){case"option":{T==null?h.writeU8(0):(h.writeU8(1),P(M,S,T,O.type,h));break}case"map":{h.writeU32(T.size),T.forEach((i,u)=>{P(M,S,u,O.key,h),P(M,S,i,O.value,h)});break}default:throw new _(`FieldType ${O} unrecognized`)}else D(M,T,h)}catch(i){throw i instanceof _&&i.addToFieldPath(S),i}}function D(M,S,T){if(typeof S.borshSerialize=="function"){S.borshSerialize(T);return}const O=M.get(S.constructor);if(!O)throw new _(`Class ${S.constructor.name} is missing in schema`);if(O.kind==="struct")O.fields.map(([h,i])=>{P(M,h,S[h],i,T)});else if(O.kind==="enum"){const h=S[O.field];for(let i=0;i<O.values.length;++i){const[u,l]=O.values[i];if(u===h){T.writeU8(i),P(M,u,S[u],l,T);break}}}else throw new _(`Unexpected schema kind: ${O.kind} for ${S.constructor.name}`)}function H(M,S,T=C){const O=new T;return D(M,S,O),O.toArray()}rt.serialize=H;function X(M,S,T,O){try{if(typeof T=="string")return O[`read${N(T)}`]();if(T instanceof Array){if(typeof T[0]=="number")return O.readFixedArray(T[0]);if(typeof T[1]=="number"){const h=[];for(let i=0;i<T[1];i++)h.push(X(M,null,T[0],O));return h}else return O.readArray(()=>X(M,S,T[0],O))}if(T.kind==="option")return O.readU8()?X(M,S,T.type,O):void 0;if(T.kind==="map"){let h=new Map;const i=O.readU32();for(let u=0;u<i;u++){const l=X(M,S,T.key,O),p=X(M,S,T.value,O);h.set(l,p)}return h}return G(M,T,O)}catch(h){throw h instanceof _&&h.addToFieldPath(S),h}}function G(M,S,T){if(typeof S.borshDeserialize=="function")return S.borshDeserialize(T);const O=M.get(S);if(!O)throw new _(`Class ${S.name} is missing in schema`);if(O.kind==="struct"){const h={};for(const[i,u]of M.get(S).fields)h[i]=X(M,i,u,T);return new S(h)}if(O.kind==="enum"){const h=T.readU8();if(h>=O.values.length)throw new _(`Enum index: ${h} is out of range`);const[i,u]=O.values[h],l=X(M,i,u,T);return new S({[i]:l})}throw new _(`Unexpected schema kind: ${O.kind} for ${S.constructor.name}`)}function tt(M,S,T,O=K){const h=new O(T),i=G(M,S,h);if(h.offset<T.length)throw new _(`Unexpected ${T.length-h.offset} bytes after deserialized data`);return i}rt.deserialize=tt;function J(M,S,T,O=K){const h=new O(T);return G(M,S,h)}return rt.deserializeUnchecked=J,rt}var ur=ga(),k={},yi;function ma(){if(yi)return k;yi=1,Object.defineProperty(k,"__esModule",{value:!0}),k.s16=k.s8=k.nu64be=k.u48be=k.u40be=k.u32be=k.u24be=k.u16be=k.nu64=k.u48=k.u40=k.u32=k.u24=k.u16=k.u8=k.offset=k.greedy=k.Constant=k.UTF8=k.CString=k.Blob=k.Boolean=k.BitField=k.BitStructure=k.VariantLayout=k.Union=k.UnionLayoutDiscriminator=k.UnionDiscriminator=k.Structure=k.Sequence=k.DoubleBE=k.Double=k.FloatBE=k.Float=k.NearInt64BE=k.NearInt64=k.NearUInt64BE=k.NearUInt64=k.IntBE=k.Int=k.UIntBE=k.UInt=k.OffsetLayout=k.GreedyCount=k.ExternalLayout=k.bindConstructorLayout=k.nameWithProperty=k.Layout=k.uint8ArrayToBuffer=k.checkUint8Array=void 0,k.constant=k.utf8=k.cstr=k.blob=k.unionLayoutDiscriminator=k.union=k.seq=k.bits=k.struct=k.f64be=k.f64=k.f32be=k.f32=k.ns64be=k.s48be=k.s40be=k.s32be=k.s24be=k.s16be=k.ns64=k.s48=k.s40=k.s32=k.s24=void 0;const t=Ps();function n(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}k.checkUint8Array=n;function r(s){return n(s),t.Buffer.from(s.buffer,s.byteOffset,s.length)}k.uint8ArrayToBuffer=r;let e=class{constructor(a,d){if(!Number.isInteger(a))throw new TypeError("span must be an integer");this.span=a,this.property=d}makeDestinationObject(){return{}}getSpan(a,d){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(a){const d=Object.create(this.constructor.prototype);return Object.assign(d,this),d.property=a,d}fromArray(a){}};k.Layout=e;function c(s,a){return a.property?s+"["+a.property+"]":s}k.nameWithProperty=c;function o(s,a){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(a&&a instanceof e))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(a,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=a,a.boundConstructor_=s,a.makeDestinationObject=()=>new s,Object.defineProperty(s.prototype,"encode",{value(d,w){return a.encode(this,d,w)},writable:!0}),Object.defineProperty(s,"decode",{value(d,w){return a.decode(d,w)},writable:!0})}k.bindConstructorLayout=o;class f extends e{isCount(){throw new Error("ExternalLayout is abstract")}}k.ExternalLayout=f;class x extends f{constructor(a=1,d){if(!Number.isInteger(a)||0>=a)throw new TypeError("elementSpan must be a (positive) integer");super(-1,d),this.elementSpan=a}isCount(){return!0}decode(a,d=0){n(a);const w=a.length-d;return Math.floor(w/this.elementSpan)}encode(a,d,w){return 0}}k.GreedyCount=x;class g extends f{constructor(a,d=0,w){if(!(a instanceof e))throw new TypeError("layout must be a Layout");if(!Number.isInteger(d))throw new TypeError("offset must be integer or undefined");super(a.span,w||a.property),this.layout=a,this.offset=d}isCount(){return this.layout instanceof B||this.layout instanceof L}decode(a,d=0){return this.layout.decode(a,d+this.offset)}encode(a,d,w=0){return this.layout.encode(a,d,w+this.offset)}}k.OffsetLayout=g;class B extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readUIntLE(d,this.span)}encode(a,d,w=0){return r(d).writeUIntLE(a,w,this.span),this.span}}k.UInt=B;class L extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readUIntBE(d,this.span)}encode(a,d,w=0){return r(d).writeUIntBE(a,w,this.span),this.span}}k.UIntBE=L;class F extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readIntLE(d,this.span)}encode(a,d,w=0){return r(d).writeIntLE(a,w,this.span),this.span}}k.Int=F;class I extends e{constructor(a,d){if(super(a,d),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(a,d=0){return r(a).readIntBE(d,this.span)}encode(a,d,w=0){return r(d).writeIntBE(a,w,this.span),this.span}}k.IntBE=I;const _=Math.pow(2,32);function C(s){const a=Math.floor(s/_),d=s-a*_;return{hi32:a,lo32:d}}function z(s,a){return s*_+a}class K extends e{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),A=w.readUInt32LE(d),U=w.readUInt32LE(d+4);return z(U,A)}encode(a,d,w=0){const A=C(a),U=r(d);return U.writeUInt32LE(A.lo32,w),U.writeUInt32LE(A.hi32,w+4),8}}k.NearUInt64=K;class N extends e{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),A=w.readUInt32BE(d),U=w.readUInt32BE(d+4);return z(A,U)}encode(a,d,w=0){const A=C(a),U=r(d);return U.writeUInt32BE(A.hi32,w),U.writeUInt32BE(A.lo32,w+4),8}}k.NearUInt64BE=N;class P extends e{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),A=w.readUInt32LE(d),U=w.readInt32LE(d+4);return z(U,A)}encode(a,d,w=0){const A=C(a),U=r(d);return U.writeUInt32LE(A.lo32,w),U.writeInt32LE(A.hi32,w+4),8}}k.NearInt64=P;class D extends e{constructor(a){super(8,a)}decode(a,d=0){const w=r(a),A=w.readInt32BE(d),U=w.readUInt32BE(d+4);return z(A,U)}encode(a,d,w=0){const A=C(a),U=r(d);return U.writeInt32BE(A.hi32,w),U.writeUInt32BE(A.lo32,w+4),8}}k.NearInt64BE=D;class H extends e{constructor(a){super(4,a)}decode(a,d=0){return r(a).readFloatLE(d)}encode(a,d,w=0){return r(d).writeFloatLE(a,w),4}}k.Float=H;class X extends e{constructor(a){super(4,a)}decode(a,d=0){return r(a).readFloatBE(d)}encode(a,d,w=0){return r(d).writeFloatBE(a,w),4}}k.FloatBE=X;class G extends e{constructor(a){super(8,a)}decode(a,d=0){return r(a).readDoubleLE(d)}encode(a,d,w=0){return r(d).writeDoubleLE(a,w),8}}k.Double=G;class tt extends e{constructor(a){super(8,a)}decode(a,d=0){return r(a).readDoubleBE(d)}encode(a,d,w=0){return r(d).writeDoubleBE(a,w),8}}k.DoubleBE=tt;class J extends e{constructor(a,d,w){if(!(a instanceof e))throw new TypeError("elementLayout must be a Layout");if(!(d instanceof f&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let A=-1;!(d instanceof f)&&0<a.span&&(A=d*a.span),super(A,w),this.elementLayout=a,this.count=d}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0,A=this.count;if(A instanceof f&&(A=A.decode(a,d)),0<this.elementLayout.span)w=A*this.elementLayout.span;else{let U=0;for(;U<A;)w+=this.elementLayout.getSpan(a,d+w),++U}return w}decode(a,d=0){const w=[];let A=0,U=this.count;for(U instanceof f&&(U=U.decode(a,d));A<U;)w.push(this.elementLayout.decode(a,d)),d+=this.elementLayout.getSpan(a,d),A+=1;return w}encode(a,d,w=0){const A=this.elementLayout,U=a.reduce((V,Y)=>V+A.encode(Y,d,w+V),0);return this.count instanceof f&&this.count.encode(a.length,d,w),U}}k.Sequence=J;class M extends e{constructor(a,d,w){if(!(Array.isArray(a)&&a.reduce((U,V)=>U&&V instanceof e,!0)))throw new TypeError("fields must be array of Layout instances");typeof d=="boolean"&&w===void 0&&(w=d,d=void 0);for(const U of a)if(0>U.span&&U.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let A=-1;try{A=a.reduce((U,V)=>U+V.getSpan(),0)}catch{}super(A,d),this.fields=a,this.decodePrefixes=!!w}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;try{w=this.fields.reduce((A,U)=>{const V=U.getSpan(a,d);return d+=V,A+V},0)}catch{throw new RangeError("indeterminate span")}return w}decode(a,d=0){n(a);const w=this.makeDestinationObject();for(const A of this.fields)if(A.property!==void 0&&(w[A.property]=A.decode(a,d)),d+=A.getSpan(a,d),this.decodePrefixes&&a.length===d)break;return w}encode(a,d,w=0){const A=w;let U=0,V=0;for(const Y of this.fields){let it=Y.span;if(V=0<it?it:0,Y.property!==void 0){const st=a[Y.property];st!==void 0&&(V=Y.encode(st,d,w),0>it&&(it=Y.getSpan(d,w)))}U=w,w+=it}return U+V-A}fromArray(a){const d=this.makeDestinationObject();for(const w of this.fields)w.property!==void 0&&0<a.length&&(d[w.property]=a.shift());return d}layoutFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}offsetOf(a){if(typeof a!="string")throw new TypeError("property must be string");let d=0;for(const w of this.fields){if(w.property===a)return d;0>w.span?d=-1:0<=d&&(d+=w.span)}}}k.Structure=M;class S{constructor(a){this.property=a}decode(a,d){throw new Error("UnionDiscriminator is abstract")}encode(a,d,w){throw new Error("UnionDiscriminator is abstract")}}k.UnionDiscriminator=S;class T extends S{constructor(a,d){if(!(a instanceof f&&a.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(d||a.property||"variant"),this.layout=a}decode(a,d){return this.layout.decode(a,d)}encode(a,d,w){return this.layout.encode(a,d,w)}}k.UnionLayoutDiscriminator=T;class O extends e{constructor(a,d,w){let A;if(a instanceof B||a instanceof L)A=new T(new g(a));else if(a instanceof f&&a.isCount())A=new T(a);else if(a instanceof S)A=a;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(d===void 0&&(d=null),!(d===null||d instanceof e))throw new TypeError("defaultLayout must be null or a Layout");if(d!==null){if(0>d.span)throw new Error("defaultLayout must have constant span");d.property===void 0&&(d=d.replicate("content"))}let U=-1;d&&(U=d.span,0<=U&&(a instanceof B||a instanceof L)&&(U+=A.layout.span)),super(U,w),this.discriminator=A,this.usesPrefixDiscriminator=a instanceof B||a instanceof L,this.defaultLayout=d,this.registry={};let V=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(Y){return V(Y)},this.configGetSourceVariant=function(Y){V=Y.bind(this)}}getSpan(a,d=0){if(0<=this.span)return this.span;const w=this.getVariant(a,d);if(!w)throw new Error("unable to determine span for unrecognized variant");return w.getSpan(a,d)}defaultGetSourceVariant(a){if(Object.prototype.hasOwnProperty.call(a,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(a,this.defaultLayout.property))return;const d=this.registry[a[this.discriminator.property]];if(d&&(!d.layout||d.property&&Object.prototype.hasOwnProperty.call(a,d.property)))return d}else for(const d in this.registry){const w=this.registry[d];if(w.property&&Object.prototype.hasOwnProperty.call(a,w.property))return w}throw new Error("unable to infer src variant")}decode(a,d=0){let w;const A=this.discriminator,U=A.decode(a,d),V=this.registry[U];if(V===void 0){const Y=this.defaultLayout;let it=0;this.usesPrefixDiscriminator&&(it=A.layout.span),w=this.makeDestinationObject(),w[A.property]=U,w[Y.property]=Y.decode(a,d+it)}else w=V.decode(a,d);return w}encode(a,d,w=0){const A=this.getSourceVariant(a);if(A===void 0){const U=this.discriminator,V=this.defaultLayout;let Y=0;return this.usesPrefixDiscriminator&&(Y=U.layout.span),U.encode(a[U.property],d,w),Y+V.encode(a[V.property],d,w+Y)}return A.encode(a,d,w)}addVariant(a,d,w){const A=new h(this,a,d,w);return this.registry[a]=A,A}getVariant(a,d=0){let w;return a instanceof Uint8Array?w=this.discriminator.decode(a,d):w=a,this.registry[w]}}k.Union=O;class h extends e{constructor(a,d,w,A){if(!(a instanceof O))throw new TypeError("union must be a Union");if(!Number.isInteger(d)||0>d)throw new TypeError("variant must be a (non-negative) integer");if(typeof w=="string"&&A===void 0&&(A=w,w=null),w){if(!(w instanceof e))throw new TypeError("layout must be a Layout");if(a.defaultLayout!==null&&0<=w.span&&w.span>a.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof A!="string")throw new TypeError("variant must have a String property")}let U=a.span;0>a.span&&(U=w?w.span:0,0<=U&&a.usesPrefixDiscriminator&&(U+=a.discriminator.layout.span)),super(U,A),this.union=a,this.variant=d,this.layout=w||null}getSpan(a,d=0){if(0<=this.span)return this.span;let w=0;this.union.usesPrefixDiscriminator&&(w=this.union.discriminator.layout.span);let A=0;return this.layout&&(A=this.layout.getSpan(a,d+w)),w+A}decode(a,d=0){const w=this.makeDestinationObject();if(this!==this.union.getVariant(a,d))throw new Error("variant mismatch");let A=0;return this.union.usesPrefixDiscriminator&&(A=this.union.discriminator.layout.span),this.layout?w[this.property]=this.layout.decode(a,d+A):this.property?w[this.property]=!0:this.union.usesPrefixDiscriminator&&(w[this.union.discriminator.property]=this.variant),w}encode(a,d,w=0){let A=0;if(this.union.usesPrefixDiscriminator&&(A=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(a,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,d,w);let U=A;if(this.layout&&(this.layout.encode(a[this.property],d,w+A),U+=this.layout.getSpan(d,w+A),0<=this.union.span&&U>this.union.span))throw new Error("encoded variant overruns containing union");return U}fromArray(a){if(this.layout)return this.layout.fromArray(a)}}k.VariantLayout=h;function i(s){return 0>s&&(s+=4294967296),s}class u extends e{constructor(a,d,w){if(!(a instanceof B||a instanceof L))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof d=="string"&&w===void 0&&(w=d,d=!1),4<a.span)throw new RangeError("word cannot exceed 32 bits");super(a.span,w),this.word=a,this.msb=!!d,this.fields=[];let A=0;this._packedSetValue=function(U){return A=i(U),this},this._packedGetValue=function(){return A}}decode(a,d=0){const w=this.makeDestinationObject(),A=this.word.decode(a,d);this._packedSetValue(A);for(const U of this.fields)U.property!==void 0&&(w[U.property]=U.decode(a));return w}encode(a,d,w=0){const A=this.word.decode(d,w);this._packedSetValue(A);for(const U of this.fields)if(U.property!==void 0){const V=a[U.property];V!==void 0&&U.encode(V)}return this.word.encode(this._packedGetValue(),d,w)}addField(a,d){const w=new l(this,a,d);return this.fields.push(w),w}addBoolean(a){const d=new p(this,a);return this.fields.push(d),d}fieldFor(a){if(typeof a!="string")throw new TypeError("property must be string");for(const d of this.fields)if(d.property===a)return d}}k.BitStructure=u;class l{constructor(a,d,w){if(!(a instanceof u))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(d)||0>=d)throw new TypeError("bits must be positive integer");const A=8*a.span,U=a.fields.reduce((V,Y)=>V+Y.bits,0);if(d+U>A)throw new Error("bits too long for span remainder ("+(A-U)+" of "+A+" remain)");this.container=a,this.bits=d,this.valueMask=(1<<d)-1,d===32&&(this.valueMask=4294967295),this.start=U,this.container.msb&&(this.start=A-U-d),this.wordMask=i(this.valueMask<<this.start),this.property=w}decode(a,d){const w=this.container._packedGetValue();return i(w&this.wordMask)>>>this.start}encode(a){if(typeof a!="number"||!Number.isInteger(a)||a!==i(a&this.valueMask))throw new TypeError(c("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const d=this.container._packedGetValue(),w=i(a<<this.start);this.container._packedSetValue(i(d&~this.wordMask)|w)}}k.BitField=l;class p extends l{constructor(a,d){super(a,1,d)}decode(a,d){return!!super.decode(a,d)}encode(a){typeof a=="boolean"&&(a=+a),super.encode(a)}}k.Boolean=p;class y extends e{constructor(a,d){if(!(a instanceof f&&a.isCount()||Number.isInteger(a)&&0<=a))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let w=-1;a instanceof f||(w=a),super(w,d),this.length=a}getSpan(a,d){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),w}decode(a,d=0){let w=this.span;return 0>w&&(w=this.length.decode(a,d)),r(a).slice(d,d+w)}encode(a,d,w){let A=this.length;if(this.length instanceof f&&(A=a.length),!(a instanceof Uint8Array&&A===a.length))throw new TypeError(c("Blob.encode",this)+" requires (length "+A+") Uint8Array as src");if(w+A>d.length)throw new RangeError("encoding overruns Uint8Array");const U=r(a);return r(d).write(U.toString("hex"),w,A,"hex"),this.length instanceof f&&this.length.encode(A,d,w),A}}k.Blob=y;class v extends e{constructor(a){super(-1,a)}getSpan(a,d=0){n(a);let w=d;for(;w<a.length&&a[w]!==0;)w+=1;return 1+w-d}decode(a,d=0){const w=this.getSpan(a,d);return r(a).slice(d,d+w-1).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const A=t.Buffer.from(a,"utf8"),U=A.length;if(w+U>d.length)throw new RangeError("encoding overruns Buffer");const V=r(d);return A.copy(V,w),V[w+U]=0,U+1}}k.CString=v;class E extends e{constructor(a,d){if(typeof a=="string"&&d===void 0&&(d=a,a=void 0),a===void 0)a=-1;else if(!Number.isInteger(a))throw new TypeError("maxSpan must be an integer");super(-1,d),this.maxSpan=a}getSpan(a,d=0){return n(a),a.length-d}decode(a,d=0){const w=this.getSpan(a,d);if(0<=this.maxSpan&&this.maxSpan<w)throw new RangeError("text length exceeds maxSpan");return r(a).slice(d,d+w).toString("utf-8")}encode(a,d,w=0){typeof a!="string"&&(a=String(a));const A=t.Buffer.from(a,"utf8"),U=A.length;if(0<=this.maxSpan&&this.maxSpan<U)throw new RangeError("text length exceeds maxSpan");if(w+U>d.length)throw new RangeError("encoding overruns Buffer");return A.copy(r(d),w),U}}k.UTF8=E;class m extends e{constructor(a,d){super(0,d),this.value=a}decode(a,d){return this.value}encode(a,d,w){return 0}}return k.Constant=m,k.greedy=(s,a)=>new x(s,a),k.offset=(s,a,d)=>new g(s,a,d),k.u8=s=>new B(1,s),k.u16=s=>new B(2,s),k.u24=s=>new B(3,s),k.u32=s=>new B(4,s),k.u40=s=>new B(5,s),k.u48=s=>new B(6,s),k.nu64=s=>new K(s),k.u16be=s=>new L(2,s),k.u24be=s=>new L(3,s),k.u32be=s=>new L(4,s),k.u40be=s=>new L(5,s),k.u48be=s=>new L(6,s),k.nu64be=s=>new N(s),k.s8=s=>new F(1,s),k.s16=s=>new F(2,s),k.s24=s=>new F(3,s),k.s32=s=>new F(4,s),k.s40=s=>new F(5,s),k.s48=s=>new F(6,s),k.ns64=s=>new P(s),k.s16be=s=>new I(2,s),k.s24be=s=>new I(3,s),k.s32be=s=>new I(4,s),k.s40be=s=>new I(5,s),k.s48be=s=>new I(6,s),k.ns64be=s=>new D(s),k.f32=s=>new H(s),k.f32be=s=>new X(s),k.f64=s=>new G(s),k.f64be=s=>new tt(s),k.struct=(s,a,d)=>new M(s,a,d),k.bits=(s,a,d)=>new u(s,a,d),k.seq=(s,a,d)=>new J(s,a,d),k.union=(s,a,d)=>new O(s,a,d),k.unionLayoutDiscriminator=(s,a)=>new T(s,a),k.blob=(s,a)=>new y(s,a),k.cstr=s=>new v(s),k.utf8=(s,a)=>new E(s,a),k.constant=(s,a)=>new m(s,a),k}var b=ma(),ya=8078e3,wa=8078001,va=8078004,ba=8078005,xa=8078006,Ea=8078011;function ns(t){return Array.isArray(t)?"%5B"+t.map(ns).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Ma([t,n]){return`${t}=${ns(n)}`}function Sa(t){const n=Object.entries(t).map(Ma).join("&");return btoa(n)}function Ba(t,n={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(n).length&&(r+=` '${Sa(n)}'`),`${r}\``}}var ze=class extends Error{constructor(...[n,r]){let e,c;if(r){const{cause:f,...x}=r;f&&(c={cause:f}),Object.keys(x).length>0&&(e=x)}const o=Ba(n,e);super(o,c);Yn(this,"cause",this.cause);Yn(this,"context");this.context={__code:n,...e},this.name="SolanaError"}};function Aa(t,n){return"fixedSize"in n?n.fixedSize:n.getSizeFromValue(t)}function Ia(t){return Object.freeze({...t,encode:n=>{const r=new Uint8Array(Aa(n,t));return t.write(n,r,0),r}})}function _a(t){return Object.freeze({...t,decode:(n,r=0)=>t.read(n,r)[0]})}function Oe(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Ra(t,n){if(Oe(t)!==Oe(n))throw new ze(va);if(Oe(t)&&Oe(n)&&t.fixedSize!==n.fixedSize)throw new ze(ba,{decoderFixedSize:n.fixedSize,encoderFixedSize:t.fixedSize});if(!Oe(t)&&!Oe(n)&&t.maxSize!==n.maxSize)throw new ze(xa,{decoderMaxSize:n.maxSize,encoderMaxSize:t.maxSize});return{...n,...t,decode:n.decode,encode:t.encode,read:n.read,write:t.write}}function ka(t,n,r=0){if(n.length-r<=0)throw new ze(ya,{codecDescription:t})}function Ta(t,n,r,e=0){const c=r.length-e;if(c<n)throw new ze(wa,{bytesLength:c,codecDescription:t,expected:n})}function Oa(t,n,r,e){if(e<n||e>r)throw new ze(Ea,{codecDescription:t,max:r,min:n,value:e})}function rs(t){return(t==null?void 0:t.endian)!==1}function La(t){return Ia({fixedSize:t.size,write(n,r,e){t.range&&Oa(t.name,t.range[0],t.range[1],n);const c=new ArrayBuffer(t.size);return t.set(new DataView(c),n,rs(t.config)),r.set(new Uint8Array(c),e),e+t.size}})}function Ua(t){return _a({fixedSize:t.size,read(n,r=0){ka(t.name,n,r),Ta(t.name,t.size,n,r);const e=new DataView(Ca(n,r,t.size));return[t.get(e,rs(t.config)),r+t.size]}})}function Ca(t,n,r){const e=t.byteOffset+(n??0),c=r??t.byteLength;return t.buffer.slice(e,e+c)}var Na=(t={})=>La({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(n,r,e)=>n.setBigUint64(0,BigInt(r),e),size:8}),za=(t={})=>Ua({config:t,get:(n,r)=>n.getBigUint64(0,r),name:"u64",size:8}),qa=(t={})=>Ra(Na(t),za(t));class Fa extends TypeError{constructor(n,r){let e;const{message:c,explanation:o,...f}=n,{path:x}=n,g=x.length===0?c:`At path: ${x.join(".")} -- ${c}`;super(o??g),o!=null&&(this.cause=g),Object.assign(this,f),this.name=this.constructor.name,this.failures=()=>e??(e=[n,...r()])}}function Da(t){return Je(t)&&typeof t[Symbol.iterator]=="function"}function Je(t){return typeof t=="object"&&t!=null}function gn(t){return Je(t)&&!Array.isArray(t)}function se(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Ka(t){const{done:n,value:r}=t.next();return n?void 0:r}function Pa(t,n,r,e){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:c,branch:o}=n,{type:f}=r,{refinement:x,message:g=`Expected a value of type \`${f}\`${x?` with refinement \`${x}\``:""}, but received: \`${se(e)}\``}=t;return{value:e,type:f,refinement:x,key:c[c.length-1],path:c,branch:o,...t,message:g}}function*wi(t,n,r,e){Da(t)||(t=[t]);for(const c of t){const o=Pa(c,n,r,e);o&&(yield o)}}function*Ir(t,n,r={}){const{path:e=[],branch:c=[t],coerce:o=!1,mask:f=!1}=r,x={path:e,branch:c,mask:f};o&&(t=n.coercer(t,x));let g="valid";for(const B of n.validator(t,x))B.explanation=r.message,g="not_valid",yield[B,void 0];for(let[B,L,F]of n.entries(t,x)){const I=Ir(L,F,{path:B===void 0?e:[...e,B],branch:B===void 0?c:[...c,L],coerce:o,mask:f,message:r.message});for(const _ of I)_[0]?(g=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):o&&(L=_[1],B===void 0?t=L:t instanceof Map?t.set(B,L):t instanceof Set?t.add(L):Je(t)&&(L!==void 0||B in t)&&(t[B]=L))}if(g!=="not_valid")for(const B of n.refiner(t,x))B.explanation=r.message,g="not_refined",yield[B,void 0];g==="valid"&&(yield[void 0,t])}let de=class{constructor(n){const{type:r,schema:e,validator:c,refiner:o,coercer:f=g=>g,entries:x=function*(){}}=n;this.type=r,this.schema=e,this.entries=x,this.coercer=f,c?this.validator=(g,B)=>{const L=c(g,B);return wi(L,B,this,g)}:this.validator=()=>[],o?this.refiner=(g,B)=>{const L=o(g,B);return wi(L,B,this,g)}:this.refiner=()=>[]}assert(n,r){return Za(n,this,r)}create(n,r){return Ge(n,this,r)}is(n){return is(n,this)}mask(n,r){return Va(n,this,r)}validate(n,r={}){return Qe(n,this,r)}};function Za(t,n,r){const e=Qe(t,n,{message:r});if(e[0])throw e[0]}function Ge(t,n,r){const e=Qe(t,n,{coerce:!0,message:r});if(e[0])throw e[0];return e[1]}function Va(t,n,r){const e=Qe(t,n,{coerce:!0,mask:!0,message:r});if(e[0])throw e[0];return e[1]}function is(t,n){return!Qe(t,n)[0]}function Qe(t,n,r={}){const e=Ir(t,n,r),c=Ka(e);return c[0]?[new Fa(c[0],function*(){for(const f of e)f[0]&&(yield f[0])}),void 0]:[void 0,c[1]]}function Re(t,n){return new de({type:t,schema:null,validator:n})}function $a(){return Re("any",()=>!0)}function $(t){return new de({type:"array",schema:t,*entries(n){if(t&&Array.isArray(n))for(const[r,e]of n.entries())yield[r,e,t]},coercer(n){return Array.isArray(n)?n.slice():n},validator(n){return Array.isArray(n)||`Expected an array value, but received: ${se(n)}`}})}function he(){return Re("boolean",t=>typeof t=="boolean")}function _r(t){return Re("instance",n=>n instanceof t||`Expected a \`${t.name}\` instance, but received: ${se(n)}`)}function ut(t){const n=se(t),r=typeof t;return new de({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(e){return e===t||`Expected the literal \`${n}\`, but received: ${se(e)}`}})}function ja(){return Re("never",()=>!1)}function j(t){return new de({...t,validator:(n,r)=>n===null||t.validator(n,r),refiner:(n,r)=>n===null||t.refiner(n,r)})}function R(){return Re("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${se(t)}`)}function W(t){return new de({...t,validator:(n,r)=>n===void 0||t.validator(n,r),refiner:(n,r)=>n===void 0||t.refiner(n,r)})}function ss(t,n){return new de({type:"record",schema:null,*entries(r){if(Je(r))for(const e in r){const c=r[e];yield[e,e,t],yield[e,c,n]}},validator(r){return gn(r)||`Expected an object, but received: ${se(r)}`},coercer(r){return gn(r)?{...r}:r}})}function Z(){return Re("string",t=>typeof t=="string"||`Expected a string, but received: ${se(t)}`)}function Rr(t){const n=ja();return new de({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const e=Math.max(t.length,r.length);for(let c=0;c<e;c++)yield[c,r[c],t[c]||n]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${se(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function q(t){const n=Object.keys(t);return new de({type:"type",schema:t,*entries(r){if(Je(r))for(const e of n)yield[e,r[e],t[e]]},validator(r){return gn(r)||`Expected an object, but received: ${se(r)}`},coercer(r){return gn(r)?{...r}:r}})}function Qt(t){const n=t.map(r=>r.type).join(" | ");return new de({type:"union",schema:null,coercer(r,e){for(const c of t){const[o,f]=c.validate(r,{coerce:!0,mask:e.mask});if(!o)return f}return r},validator(r,e){const c=[];for(const o of t){const[...f]=Ir(r,o,e),[x]=f;if(x[0])for(const[g]of f)g&&c.push(g);else return[]}return[`Expected the value to satisfy a union of \`${n}\`, but received: ${se(r)}`,...c]}})}function Pe(){return Re("unknown",()=>!0)}function tn(t,n,r){return new de({...t,coercer:(e,c)=>is(e,n)?t.coercer(r(e,c),c):t.coercer(e,c)})}const os=Ii(xo);var cr,vi;function Ya(){if(vi)return cr;vi=1;const t=os.v4;return cr=function(r,e,c,o){if(typeof r!="string")throw new TypeError(r+" must be a string");o=o||{};const f=typeof o.version=="number"?o.version:2;if(f!==1&&f!==2)throw new TypeError(f+" must be 1 or 2");const x={method:r};if(f===2&&(x.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");x.params=e}if(typeof c>"u"){const g=typeof o.generator=="function"?o.generator:function(){return t()};x.id=g(x,o)}else f===2&&c===null?o.notificationIdNull&&(x.id=null):x.id=c;return x},cr}var fr,bi;function Ga(){if(bi)return fr;bi=1;const t=os.v4,n=Ya(),r=function(e,c){if(!(this instanceof r))return new r(e,c);c||(c={}),this.options={reviver:typeof c.reviver<"u"?c.reviver:null,replacer:typeof c.replacer<"u"?c.replacer:null,generator:typeof c.generator<"u"?c.generator:function(){return t()},version:typeof c.version<"u"?c.version:2,notificationIdNull:typeof c.notificationIdNull=="boolean"?c.notificationIdNull:!1},this.callServer=e};return fr=r,r.prototype.request=function(e,c,o,f){const x=this;let g=null;const B=Array.isArray(e)&&typeof c=="function";if(this.options.version===1&&B)throw new TypeError("JSON-RPC 1.0 does not support batching");if(B||!B&&e&&typeof e=="object"&&typeof c=="function")f=c,g=e;else{typeof o=="function"&&(f=o,o=void 0);const I=typeof f=="function";try{g=n(e,c,o,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(_){if(I)return f(_);throw _}if(!I)return g}let F;try{F=JSON.stringify(g,this.options.replacer)}catch(I){return f(I)}return this.callServer(F,function(I,_){x._parseResponse(I,_,f)}),g},r.prototype._parseResponse=function(e,c,o){if(e){o(e);return}if(!c)return o();let f;try{f=JSON.parse(c,this.options.reviver)}catch(x){return o(x)}if(o.length===3)if(Array.isArray(f)){const x=function(B){return typeof B.error<"u"},g=function(B){return!x(B)};return o(null,f.filter(x),f.filter(g))}else return o(null,f.error,f.result);o(null,f)},fr}Ga();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xi=(t,n)=>(t+(t>=0?n:-n)/as)/n;function Ha(t,n,r){const[[e,c],[o,f]]=n,x=xi(f*t,r),g=xi(-c*t,r);let B=t-x*e-g*o,L=-x*c-g*f;const F=B<ye,I=L<ye;F&&(B=-B),I&&(L=-L);const _=He(Math.ceil(zi(r)/2))+qe;if(B<ye||B>=_||L<ye||L>=_)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:F,k1:B,k2neg:I,k2:L}}function gr(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function lr(t,n){const r={};for(let e of Object.keys(n))r[e]=t[e]===void 0?n[e]:t[e];return Ie(r.lowS,"lowS"),Ie(r.prehash,"prehash"),r.format!==void 0&&gr(r.format),r}class Wa extends Error{constructor(n=""){super(n)}}const pe={Err:Wa,_tlv:{encode:(t,n)=>{const{Err:r}=pe;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length&1)throw new r("tlv.encode: unpadded data");const e=n.length/2,c=en(e);if(c.length/2&128)throw new r("tlv.encode: long form length too big");const o=e>127?en(c.length/2|128):"";return en(t)+o+c+n},decode(t,n){const{Err:r}=pe;let e=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[e++]!==t)throw new r("tlv.decode: wrong tlv");const c=n[e++],o=!!(c&128);let f=0;if(!o)f=c;else{const g=c&127;if(!g)throw new r("tlv.decode(long): indefinite length not supported");if(g>4)throw new r("tlv.decode(long): byte length is too big");const B=n.subarray(e,e+g);if(B.length!==g)throw new r("tlv.decode: length bytes not complete");if(B[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const L of B)f=f<<8|L;if(e+=g,f<128)throw new r("tlv.decode(long): not minimal encoding")}const x=n.subarray(e,e+f);if(x.length!==f)throw new r("tlv.decode: wrong value length");return{v:x,l:n.subarray(e+f)}}},_int:{encode(t){const{Err:n}=pe;if(t<ye)throw new n("integer: negative integers are not allowed");let r=en(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new n("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:n}=pe;if(t[0]&128)throw new n("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new n("invalid signature integer: unnecessary leading zero");return Mn(t)}},toSig(t){const{Err:n,_int:r,_tlv:e}=pe,c=ft("signature",t),{v:o,l:f}=e.decode(48,c);if(f.length)throw new n("invalid signature: left bytes after parsing");const{v:x,l:g}=e.decode(2,o),{v:B,l:L}=e.decode(2,g);if(L.length)throw new n("invalid signature: left bytes after parsing");return{r:r.decode(x),s:r.decode(B)}},hexFromSig(t){const{_tlv:n,_int:r}=pe,e=n.encode(2,r.encode(t.r)),c=n.encode(2,r.encode(t.s)),o=e+c;return n.encode(48,o)}},ye=BigInt(0),qe=BigInt(1),as=BigInt(2),nn=BigInt(3),Xa=BigInt(4);function Ue(t,n){const{BYTES:r}=t;let e;if(typeof n=="bigint")e=n;else{let c=ft("private key",n);try{e=t.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof n}`)}}if(!t.isValidNot0(e))throw new Error("invalid private key: out of range [1..N-1]");return e}function Ja(t,n={}){const r=Qi("weierstrass",t,n),{Fp:e,Fn:c}=r;let o=r.CURVE;const{h:f,n:x}=o;We(n,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:g}=n;if(g&&(!e.is0(o.a)||typeof g.beta!="bigint"||!Array.isArray(g.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const B=cs(e,c);function L(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function F(O,h,i){const{x:u,y:l}=h.toAffine(),p=e.toBytes(u);if(Ie(i,"isCompressed"),i){L();const y=!e.isOdd(l);return fe(us(y),p)}else return fe(Uint8Array.of(4),p,e.toBytes(l))}function I(O){ie(O,void 0,"Point");const{publicKey:h,publicKeyUncompressed:i}=B,u=O.length,l=O[0],p=O.subarray(1);if(u===h&&(l===2||l===3)){const y=e.fromBytes(p);if(!e.isValid(y))throw new Error("bad point: is not on curve, wrong x");const v=z(y);let E;try{E=e.sqrt(v)}catch(a){const d=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+d)}L();const m=e.isOdd(E);return(l&1)===1!==m&&(E=e.neg(E)),{x:y,y:E}}else if(u===i&&l===4){const y=e.BYTES,v=e.fromBytes(p.subarray(0,y)),E=e.fromBytes(p.subarray(y,y*2));if(!K(v,E))throw new Error("bad point: is not on curve");return{x:v,y:E}}else throw new Error(`bad point: got length ${u}, expected compressed=${h} or uncompressed=${i}`)}const _=n.toBytes||F,C=n.fromBytes||I;function z(O){const h=e.sqr(O),i=e.mul(h,O);return e.add(e.add(i,e.mul(O,o.a)),o.b)}function K(O,h){const i=e.sqr(h),u=z(O);return e.eql(i,u)}if(!K(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const N=e.mul(e.pow(o.a,nn),Xa),P=e.mul(e.sqr(o.b),BigInt(27));if(e.is0(e.add(N,P)))throw new Error("bad curve params: a or b");function D(O,h,i=!1){if(!e.isValid(h)||i&&e.is0(h))throw new Error(`bad point coordinate ${O}`);return h}function H(O){if(!(O instanceof M))throw new Error("ProjectivePoint expected")}function X(O){if(!g||!g.basises)throw new Error("no endo");return Ha(O,g.basises,c.ORDER)}const G=cn((O,h)=>{const{X:i,Y:u,Z:l}=O;if(e.eql(l,e.ONE))return{x:i,y:u};const p=O.is0();h==null&&(h=p?e.ONE:e.inv(l));const y=e.mul(i,h),v=e.mul(u,h),E=e.mul(l,h);if(p)return{x:e.ZERO,y:e.ZERO};if(!e.eql(E,e.ONE))throw new Error("invZ was invalid");return{x:y,y:v}}),tt=cn(O=>{if(O.is0()){if(n.allowInfinityPoint&&!e.is0(O.Y))return;throw new Error("bad point: ZERO")}const{x:h,y:i}=O.toAffine();if(!e.isValid(h)||!e.isValid(i))throw new Error("bad point: x or y not field elements");if(!K(h,i))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function J(O,h,i,u,l){return i=new M(e.mul(i.X,O),i.Y,i.Z),h=fn(u,h),i=fn(l,i),h.add(i)}class M{constructor(h,i,u){this.X=D("x",h),this.Y=D("y",i,!0),this.Z=D("z",u),Object.freeze(this)}static CURVE(){return o}static fromAffine(h){const{x:i,y:u}=h||{};if(!h||!e.isValid(i)||!e.isValid(u))throw new Error("invalid affine point");if(h instanceof M)throw new Error("projective point not allowed");return e.is0(i)&&e.is0(u)?M.ZERO:new M(i,u,e.ONE)}static fromBytes(h){const i=M.fromAffine(C(ie(h,void 0,"point")));return i.assertValidity(),i}static fromHex(h){return M.fromBytes(ft("pointHex",h))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(h=8,i=!0){return T.createCache(this,h),i||this.multiply(nn),this}assertValidity(){tt(this)}hasEvenY(){const{y:h}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(h)}equals(h){H(h);const{X:i,Y:u,Z:l}=this,{X:p,Y:y,Z:v}=h,E=e.eql(e.mul(i,v),e.mul(p,l)),m=e.eql(e.mul(u,v),e.mul(y,l));return E&&m}negate(){return new M(this.X,e.neg(this.Y),this.Z)}double(){const{a:h,b:i}=o,u=e.mul(i,nn),{X:l,Y:p,Z:y}=this;let v=e.ZERO,E=e.ZERO,m=e.ZERO,s=e.mul(l,l),a=e.mul(p,p),d=e.mul(y,y),w=e.mul(l,p);return w=e.add(w,w),m=e.mul(l,y),m=e.add(m,m),v=e.mul(h,m),E=e.mul(u,d),E=e.add(v,E),v=e.sub(a,E),E=e.add(a,E),E=e.mul(v,E),v=e.mul(w,v),m=e.mul(u,m),d=e.mul(h,d),w=e.sub(s,d),w=e.mul(h,w),w=e.add(w,m),m=e.add(s,s),s=e.add(m,s),s=e.add(s,d),s=e.mul(s,w),E=e.add(E,s),d=e.mul(p,y),d=e.add(d,d),s=e.mul(d,w),v=e.sub(v,s),m=e.mul(d,a),m=e.add(m,m),m=e.add(m,m),new M(v,E,m)}add(h){H(h);const{X:i,Y:u,Z:l}=this,{X:p,Y:y,Z:v}=h;let E=e.ZERO,m=e.ZERO,s=e.ZERO;const a=o.a,d=e.mul(o.b,nn);let w=e.mul(i,p),A=e.mul(u,y),U=e.mul(l,v),V=e.add(i,u),Y=e.add(p,y);V=e.mul(V,Y),Y=e.add(w,A),V=e.sub(V,Y),Y=e.add(i,l);let it=e.add(p,v);return Y=e.mul(Y,it),it=e.add(w,U),Y=e.sub(Y,it),it=e.add(u,l),E=e.add(y,v),it=e.mul(it,E),E=e.add(A,U),it=e.sub(it,E),s=e.mul(a,Y),E=e.mul(d,U),s=e.add(E,s),E=e.sub(A,s),s=e.add(A,s),m=e.mul(E,s),A=e.add(w,w),A=e.add(A,w),U=e.mul(a,U),Y=e.mul(d,Y),A=e.add(A,U),U=e.sub(w,U),U=e.mul(a,U),Y=e.add(Y,U),w=e.mul(A,Y),m=e.add(m,w),w=e.mul(it,Y),E=e.mul(V,E),E=e.sub(E,w),w=e.mul(V,A),s=e.mul(it,s),s=e.add(s,w),new M(E,m,s)}subtract(h){return this.add(h.negate())}is0(){return this.equals(M.ZERO)}multiply(h){const{endo:i}=n;if(!c.isValidNot0(h))throw new Error("invalid scalar: out of range");let u,l;const p=y=>T.cached(this,y,v=>Be(M,v));if(i){const{k1neg:y,k1:v,k2neg:E,k2:m}=X(h),{p:s,f:a}=p(v),{p:d,f:w}=p(m);l=a.add(w),u=J(i.beta,s,d,y,E)}else{const{p:y,f:v}=p(h);u=y,l=v}return Be(M,[u,l])[0]}multiplyUnsafe(h){const{endo:i}=n,u=this;if(!c.isValid(h))throw new Error("invalid scalar: out of range");if(h===ye||u.is0())return M.ZERO;if(h===qe)return u;if(T.hasCache(this))return this.multiply(h);if(i){const{k1neg:l,k1:p,k2neg:y,k2:v}=X(h),{p1:E,p2:m}=$o(M,u,p,v);return J(i.beta,E,m,l,y)}else return T.unsafe(u,h)}multiplyAndAddUnsafe(h,i,u){const l=this.multiplyUnsafe(i).add(h.multiplyUnsafe(u));return l.is0()?void 0:l}toAffine(h){return G(this,h)}isTorsionFree(){const{isTorsionFree:h}=n;return f===qe?!0:h?h(M,this):T.unsafe(this,x).is0()}clearCofactor(){const{clearCofactor:h}=n;return f===qe?this:h?h(M,this):this.multiplyUnsafe(f)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}toBytes(h=!0){return Ie(h,"isCompressed"),this.assertValidity(),_(M,this,h)}toHex(h=!0){return Ae(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(h=!0){return this.toBytes(h)}_setWindowSize(h){this.precompute(h)}static normalizeZ(h){return Be(M,h)}static msm(h,i){return Ji(M,c,h,i)}static fromPrivateKey(h){return M.BASE.multiply(Ue(c,h))}}M.BASE=new M(o.Gx,o.Gy,e.ONE),M.ZERO=new M(e.ZERO,e.ONE,e.ZERO),M.Fp=e,M.Fn=c;const S=c.BITS,T=new Xi(M,n.endo?Math.ceil(S/2):S);return M.BASE.precompute(8),M}function us(t){return Uint8Array.of(t?2:3)}function cs(t,n){return{secretKey:n.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*n.BYTES}}function Qa(t,n={}){const{Fn:r}=t,e=n.randomBytes||xr,c=Object.assign(cs(t.Fp,r),{seed:Gi(r.ORDER)});function o(_){try{return!!Ue(r,_)}catch{return!1}}function f(_,C){const{publicKey:z,publicKeyUncompressed:K}=c;try{const N=_.length;return C===!0&&N!==z||C===!1&&N!==K?!1:!!t.fromBytes(_)}catch{return!1}}function x(_=e(c.seed)){return Po(ie(_,c.seed,"seed"),r.ORDER)}function g(_,C=!0){return t.BASE.multiply(Ue(r,_)).toBytes(C)}function B(_){const C=x(_);return{secretKey:C,publicKey:g(C)}}function L(_){if(typeof _=="bigint")return!1;if(_ instanceof t)return!0;const{secretKey:C,publicKey:z,publicKeyUncompressed:K}=c;if(r.allowedLengths||C===z)return;const N=ft("key",_).length;return N===z||N===K}function F(_,C,z=!0){if(L(_)===!0)throw new Error("first arg must be private key");if(L(C)===!1)throw new Error("second arg must be public key");const K=Ue(r,_);return t.fromHex(C).multiply(K).toBytes(z)}return Object.freeze({getPublicKey:g,getSharedSecret:F,keygen:B,Point:t,utils:{isValidSecretKey:o,isValidPublicKey:f,randomSecretKey:x,isValidPrivateKey:o,randomPrivateKey:x,normPrivateKeyToScalar:_=>Ue(r,_),precompute(_=8,C=t.BASE){return C.precompute(_,!1)}},lengths:c})}function tu(t,n,r={}){Zs(n),We(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const e=r.randomBytes||xr,c=r.hmac||((i,...u)=>Qs(n,i,fe(...u))),{Fp:o,Fn:f}=t,{ORDER:x,BITS:g}=f,{keygen:B,getPublicKey:L,getSharedSecret:F,utils:I,lengths:_}=Qa(t,r),C={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},z="compact";function K(i){const u=x>>qe;return i>u}function N(i,u){if(!f.isValidNot0(u))throw new Error(`invalid signature ${i}: out of range 1..Point.Fn.ORDER`);return u}function P(i,u){gr(u);const l=_.signature,p=u==="compact"?l:u==="recovered"?l+1:void 0;return ie(i,p,`${u} signature`)}class D{constructor(u,l,p){this.r=N("r",u),this.s=N("s",l),p!=null&&(this.recovery=p),Object.freeze(this)}static fromBytes(u,l=z){P(u,l);let p;if(l==="der"){const{r:m,s}=pe.toSig(ie(u));return new D(m,s)}l==="recovered"&&(p=u[0],l="compact",u=u.subarray(1));const y=f.BYTES,v=u.subarray(0,y),E=u.subarray(y,y*2);return new D(f.fromBytes(v),f.fromBytes(E),p)}static fromHex(u,l){return this.fromBytes(un(u),l)}addRecoveryBit(u){return new D(this.r,this.s,u)}recoverPublicKey(u){const l=o.ORDER,{r:p,s:y,recovery:v}=this;if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");if(x*as<l&&v>1)throw new Error("recovery id is ambiguous for h>1 curve");const m=v===2||v===3?p+x:p;if(!o.isValid(m))throw new Error("recovery id 2 or 3 invalid");const s=o.toBytes(m),a=t.fromBytes(fe(us((v&1)===0),s)),d=f.inv(m),w=X(ft("msgHash",u)),A=f.create(-w*d),U=f.create(y*d),V=t.BASE.multiplyUnsafe(A).add(a.multiplyUnsafe(U));if(V.is0())throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return K(this.s)}toBytes(u=z){if(gr(u),u==="der")return un(pe.hexFromSig(this));const l=f.toBytes(this.r),p=f.toBytes(this.s);if(u==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return fe(Uint8Array.of(this.recovery),l,p)}return fe(l,p)}toHex(u){return Ae(this.toBytes(u))}assertValidity(){}static fromCompact(u){return D.fromBytes(ft("sig",u),"compact")}static fromDER(u){return D.fromBytes(ft("sig",u),"der")}normalizeS(){return this.hasHighS()?new D(this.r,f.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ae(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ae(this.toBytes("compact"))}}const H=r.bits2int||function(u){if(u.length>8192)throw new Error("input is too large");const l=Mn(u),p=u.length*8-g;return p>0?l>>BigInt(p):l},X=r.bits2int_modN||function(u){return f.create(H(u))},G=He(g);function tt(i){return pr("num < 2^"+g,i,ye,G),f.toBytes(i)}function J(i,u){return ie(i,void 0,"message"),u?ie(n(i),void 0,"prehashed message"):i}function M(i,u,l){if(["recovered","canonical"].some(A=>A in l))throw new Error("sign() legacy options not supported");const{lowS:p,prehash:y,extraEntropy:v}=lr(l,C);i=J(i,y);const E=X(i),m=Ue(f,u),s=[tt(m),tt(E)];if(v!=null&&v!==!1){const A=v===!0?e(_.secretKey):v;s.push(ft("extraEntropy",A))}const a=fe(...s),d=E;function w(A){const U=H(A);if(!f.isValidNot0(U))return;const V=f.inv(U),Y=t.BASE.multiply(U).toAffine(),it=f.create(Y.x);if(it===ye)return;const st=f.create(V*f.create(d+it*m));if(st===ye)return;let at=(Y.x===it?0:2)|Number(Y.y&qe),Ve=st;return p&&K(st)&&(Ve=f.neg(st),at^=1),new D(it,Ve,at)}return{seed:a,k2sig:w}}function S(i,u,l={}){i=ft("message",i);const{seed:p,k2sig:y}=M(i,u,l);return Oo(n.outputLen,f.BYTES,c)(p,y)}function T(i){let u;const l=typeof i=="string"||bn(i),p=!l&&i!==null&&typeof i=="object"&&typeof i.r=="bigint"&&typeof i.s=="bigint";if(!l&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(p)u=new D(i.r,i.s);else if(l){try{u=D.fromBytes(ft("sig",i),"der")}catch(y){if(!(y instanceof pe.Err))throw y}if(!u)try{u=D.fromBytes(ft("sig",i),"compact")}catch{return!1}}return u||!1}function O(i,u,l,p={}){const{lowS:y,prehash:v,format:E}=lr(p,C);if(l=ft("publicKey",l),u=J(ft("message",u),v),"strict"in p)throw new Error("options.strict was renamed to lowS");const m=E===void 0?T(i):D.fromBytes(ft("sig",i),E);if(m===!1)return!1;try{const s=t.fromBytes(l);if(y&&m.hasHighS())return!1;const{r:a,s:d}=m,w=X(u),A=f.inv(d),U=f.create(w*A),V=f.create(a*A),Y=t.BASE.multiplyUnsafe(U).add(s.multiplyUnsafe(V));return Y.is0()?!1:f.create(Y.x)===a}catch{return!1}}function h(i,u,l={}){const{prehash:p}=lr(l,C);return u=J(u,p),D.fromBytes(i,"recovered").recoverPublicKey(u).toBytes()}return Object.freeze({keygen:B,getPublicKey:L,getSharedSecret:F,utils:I,lengths:_,Point:t,sign:S,verify:O,recoverPublicKey:h,Signature:D,hash:n})}function eu(t){const n={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let e=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(f=>Math.ceil(f/2)))):void 0;const c=_e(n.n,{BITS:t.nBitLength,allowedLengths:e,modFromBytes:t.wrapPrivateKey}),o={Fp:r,Fn:c,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:n,curveOpts:o}}function nu(t){const{CURVE:n,curveOpts:r}=eu(t),e={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:n,curveOpts:r,hash:t.hash,ecdsaOpts:e}}function ru(t,n){const r=n.Point;return Object.assign({},n,{ProjectivePoint:r,CURVE:Object.assign({},t,ji(r.Fn.ORDER,r.Fn.BITS))})}function iu(t){const{CURVE:n,curveOpts:r,hash:e,ecdsaOpts:c}=nu(t),o=Ja(n,r),f=tu(o,e,c);return ru(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function su(t,n){const r=e=>iu({...t,hash:e});return{...r(n),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},ou={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Ei=BigInt(2);function au(t){const n=kr.p,r=BigInt(3),e=BigInt(6),c=BigInt(11),o=BigInt(22),f=BigInt(23),x=BigInt(44),g=BigInt(88),B=t*t*t%n,L=B*B*t%n,F=ct(L,r,n)*L%n,I=ct(F,r,n)*L%n,_=ct(I,Ei,n)*B%n,C=ct(_,c,n)*_%n,z=ct(C,o,n)*C%n,K=ct(z,x,n)*z%n,N=ct(K,g,n)*K%n,P=ct(N,x,n)*z%n,D=ct(P,r,n)*L%n,H=ct(D,f,n)*C%n,X=ct(H,e,n)*B%n,G=ct(X,Ei,n);if(!mr.eql(mr.sqr(G),t))throw new Error("Cannot find square root");return G}const mr=_e(kr.p,{sqrt:au}),uu=su({...kr,Fp:mr,lowS:!0,endo:ou},to);Xe.utils.randomPrivateKey;Xe.getPublicKey;function Mi(t){try{return Xe.ExtendedPoint.fromHex(t),!0}catch{return!1}}const cu=(t,n)=>Xe.sign(t,n.slice(0,32));Xe.verify;const fs=t=>nt.Buffer.isBuffer(t)?t:t instanceof Uint8Array?nt.Buffer.from(t.buffer,t.byteOffset,t.byteLength):nt.Buffer.from(t);class fu{constructor(n){Object.assign(this,n)}encode(){return nt.Buffer.from(ur.serialize(on,this))}static decode(n){return ur.deserialize(on,this,n)}static decodeUnchecked(n){return ur.deserializeUnchecked(on,this,n)}}const on=new Map;var ls;const lu=32,xe=32;function hu(t){return t._bn!==void 0}let Si=1;class Q extends fu{constructor(n){if(super({}),this._bn=void 0,hu(n))this._bn=n._bn;else{if(typeof n=="string"){const r=ce.decode(n);if(r.length!=xe)throw new Error("Invalid public key input");this._bn=new ni(r)}else this._bn=new ni(n);if(this._bn.byteLength()>xe)throw new Error("Invalid public key input")}}static unique(){const n=new Q(Si);return Si+=1,new Q(n.toBuffer())}equals(n){return this._bn.eq(n._bn)}toBase58(){return ce.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const n=this.toBuffer();return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}toBuffer(){const n=this._bn.toArrayLike(nt.Buffer);if(n.length===xe)return n;const r=nt.Buffer.alloc(32);return n.copy(r,32-n.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(n,r,e){const c=nt.Buffer.concat([n.toBuffer(),nt.Buffer.from(r),e.toBuffer()]),o=ti(c);return new Q(o)}static createProgramAddressSync(n,r){let e=nt.Buffer.alloc(0);n.forEach(function(o){if(o.length>lu)throw new TypeError("Max seed length exceeded");e=nt.Buffer.concat([e,fs(o)])}),e=nt.Buffer.concat([e,r.toBuffer(),nt.Buffer.from("ProgramDerivedAddress")]);const c=ti(e);if(Mi(c))throw new Error("Invalid seeds, address must fall off the curve");return new Q(c)}static async createProgramAddress(n,r){return this.createProgramAddressSync(n,r)}static findProgramAddressSync(n,r){let e=255,c;for(;e!=0;){try{const o=n.concat(nt.Buffer.from([e]));c=this.createProgramAddressSync(o,r)}catch(o){if(o instanceof TypeError)throw o;e--;continue}return[c,e]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(n,r){return this.findProgramAddressSync(n,r)}static isOnCurve(n){const r=new Q(n);return Mi(r.toBytes())}}ls=Q;Q.default=new ls("11111111111111111111111111111111");on.set(Q,{kind:"struct",fields:[["_bn","u256"]]});new Q("BPFLoader1111111111111111111111111111111111");const an=1232,Tr=127,yr=64;class mn{constructor(n,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=n,this.accountKeysFromLookups=r}keySegments(){const n=[this.staticAccountKeys];return this.accountKeysFromLookups&&(n.push(this.accountKeysFromLookups.writable),n.push(this.accountKeysFromLookups.readonly)),n}get(n){for(const r of this.keySegments()){if(n<r.length)return r[n];n-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(n){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach((o,f)=>{e.set(o.toBase58(),f)});const c=o=>{const f=e.get(o.toBase58());if(f===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return f};return n.map(o=>({programIdIndex:c(o.programId),accountKeyIndexes:o.keys.map(f=>c(f.pubkey)),data:o.data}))}}const et=(t="publicKey")=>b.blob(32,t),du=(t="signature")=>b.blob(64,t),Ce=(t="string")=>{const n=b.struct([b.u32("length"),b.u32("lengthPadding"),b.blob(b.offset(b.u32(),-8),"chars")],t),r=n.decode.bind(n),e=n.encode.bind(n),c=n;return c.decode=(o,f)=>r(o,f).chars.toString(),c.encode=(o,f,x)=>{const g={chars:nt.Buffer.from(o,"utf8")};return e(g,f,x)},c.alloc=o=>b.u32().span+b.u32().span+nt.Buffer.from(o,"utf8").length,c},pu=(t="authorized")=>b.struct([et("staker"),et("withdrawer")],t),gu=(t="lockup")=>b.struct([b.ns64("unixTimestamp"),b.ns64("epoch"),et("custodian")],t),mu=(t="voteInit")=>b.struct([et("nodePubkey"),et("authorizedVoter"),et("authorizedWithdrawer"),b.u8("commission")],t),yu=(t="voteAuthorizeWithSeedArgs")=>b.struct([b.u32("voteAuthorizationType"),et("currentAuthorityDerivedKeyOwnerPubkey"),Ce("currentAuthorityDerivedKeySeed"),et("newAuthorized")],t);function ee(t){let n=0,r=0;for(;;){let e=t.shift();if(n|=(e&127)<<r*7,r+=1,(e&128)===0)break}return n}function ne(t,n){let r=n;for(;;){let e=r&127;if(r>>=7,r==0){t.push(e);break}else e|=128,t.push(e)}}function le(t,n){if(!t)throw new Error(n||"Assertion failed")}class Bn{constructor(n,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=n,this.keyMetaMap=r}static compile(n,r){const e=new Map,c=f=>{const x=f.toBase58();let g=e.get(x);return g===void 0&&(g={isSigner:!1,isWritable:!1,isInvoked:!1},e.set(x,g)),g},o=c(r);o.isSigner=!0,o.isWritable=!0;for(const f of n){c(f.programId).isInvoked=!0;for(const x of f.keys){const g=c(x.pubkey);g.isSigner||(g.isSigner=x.isSigner),g.isWritable||(g.isWritable=x.isWritable)}}return new Bn(r,e)}getMessageComponents(){const n=[...this.keyMetaMap.entries()];le(n.length<=256,"Max static account keys length exceeded");const r=n.filter(([,g])=>g.isSigner&&g.isWritable),e=n.filter(([,g])=>g.isSigner&&!g.isWritable),c=n.filter(([,g])=>!g.isSigner&&g.isWritable),o=n.filter(([,g])=>!g.isSigner&&!g.isWritable),f={numRequiredSignatures:r.length+e.length,numReadonlySignedAccounts:e.length,numReadonlyUnsignedAccounts:o.length};{le(r.length>0,"Expected at least one writable signer key");const[g]=r[0];le(g===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const x=[...r.map(([g])=>new Q(g)),...e.map(([g])=>new Q(g)),...c.map(([g])=>new Q(g)),...o.map(([g])=>new Q(g))];return[f,x]}extractTableLookup(n){const[r,e]=this.drainKeysFoundInLookupTable(n.state.addresses,f=>!f.isSigner&&!f.isInvoked&&f.isWritable),[c,o]=this.drainKeysFoundInLookupTable(n.state.addresses,f=>!f.isSigner&&!f.isInvoked&&!f.isWritable);if(!(r.length===0&&c.length===0))return[{accountKey:n.key,writableIndexes:r,readonlyIndexes:c},{writable:e,readonly:o}]}drainKeysFoundInLookupTable(n,r){const e=new Array,c=new Array;for(const[o,f]of this.keyMetaMap.entries())if(r(f)){const x=new Q(o),g=n.findIndex(B=>B.equals(x));g>=0&&(le(g<256,"Max lookup table index exceeded"),e.push(g),c.push(x),this.keyMetaMap.delete(o))}return[e,c]}}const hs="Reached end of buffer unexpectedly";function me(t){if(t.length===0)throw new Error(hs);return t.shift()}function re(t,...n){const[r]=n;if(n.length===2?r+(n[1]??0)>t.length:r>=t.length)throw new Error(hs);return t.splice(...n)}class yn{constructor(n){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=n.header,this.accountKeys=n.accountKeys.map(r=>new Q(r)),this.recentBlockhash=n.recentBlockhash,this.instructions=n.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:ce.decode(n.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new mn(this.staticAccountKeys)}static compile(n){const r=Bn.compile(n.instructions,n.payerKey),[e,c]=r.getMessageComponents(),f=new mn(c).compileInstructions(n.instructions).map(x=>({programIdIndex:x.programIdIndex,accounts:x.accountKeyIndexes,data:ce.encode(x.data)}));return new yn({header:e,accountKeys:c,recentBlockhash:n.recentBlockhash,instructions:f})}isAccountSigner(n){return n<this.header.numRequiredSignatures}isAccountWritable(n){const r=this.header.numRequiredSignatures;if(n>=this.header.numRequiredSignatures){const e=n-r,o=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return e<o}else{const e=r-this.header.numReadonlySignedAccounts;return n<e}}isProgramId(n){return this.indexToProgramIds.has(n)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((n,r)=>!this.isProgramId(r))}serialize(){const n=this.accountKeys.length;let r=[];ne(r,n);const e=this.instructions.map(F=>{const{accounts:I,programIdIndex:_}=F,C=Array.from(ce.decode(F.data));let z=[];ne(z,I.length);let K=[];return ne(K,C.length),{programIdIndex:_,keyIndicesCount:nt.Buffer.from(z),keyIndices:I,dataLength:nt.Buffer.from(K),data:C}});let c=[];ne(c,e.length);let o=nt.Buffer.alloc(an);nt.Buffer.from(c).copy(o);let f=c.length;e.forEach(F=>{const _=b.struct([b.u8("programIdIndex"),b.blob(F.keyIndicesCount.length,"keyIndicesCount"),b.seq(b.u8("keyIndex"),F.keyIndices.length,"keyIndices"),b.blob(F.dataLength.length,"dataLength"),b.seq(b.u8("userdatum"),F.data.length,"data")]).encode(F,o,f);f+=_}),o=o.slice(0,f);const x=b.struct([b.blob(1,"numRequiredSignatures"),b.blob(1,"numReadonlySignedAccounts"),b.blob(1,"numReadonlyUnsignedAccounts"),b.blob(r.length,"keyCount"),b.seq(et("key"),n,"keys"),et("recentBlockhash")]),g={numRequiredSignatures:nt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nt.Buffer.from(r),keys:this.accountKeys.map(F=>fs(F.toBytes())),recentBlockhash:ce.decode(this.recentBlockhash)};let B=nt.Buffer.alloc(2048);const L=x.encode(g,B);return o.copy(B,L),B.slice(0,L+o.length)}static from(n){let r=[...n];const e=me(r);if(e!==(e&Tr))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const c=me(r),o=me(r),f=ee(r);let x=[];for(let I=0;I<f;I++){const _=re(r,0,xe);x.push(new Q(nt.Buffer.from(_)))}const g=re(r,0,xe),B=ee(r);let L=[];for(let I=0;I<B;I++){const _=me(r),C=ee(r),z=re(r,0,C),K=ee(r),N=re(r,0,K),P=ce.encode(nt.Buffer.from(N));L.push({programIdIndex:_,accounts:z,data:P})}const F={header:{numRequiredSignatures:e,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:o},recentBlockhash:ce.encode(nt.Buffer.from(g)),accountKeys:x,instructions:L};return new yn(F)}}class wn{constructor(n){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=n.header,this.staticAccountKeys=n.staticAccountKeys,this.recentBlockhash=n.recentBlockhash,this.compiledInstructions=n.compiledInstructions,this.addressTableLookups=n.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let n=0;for(const r of this.addressTableLookups)n+=r.readonlyIndexes.length+r.writableIndexes.length;return n}getAccountKeys(n){let r;if(n&&"accountKeysFromLookups"in n&&n.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=n.accountKeysFromLookups.writable.length+n.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=n.accountKeysFromLookups}else if(n&&"addressLookupTableAccounts"in n&&n.addressLookupTableAccounts)r=this.resolveAddressTableLookups(n.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new mn(this.staticAccountKeys,r)}isAccountSigner(n){return n<this.header.numRequiredSignatures}isAccountWritable(n){const r=this.header.numRequiredSignatures,e=this.staticAccountKeys.length;if(n>=e){const c=n-e,o=this.addressTableLookups.reduce((f,x)=>f+x.writableIndexes.length,0);return c<o}else if(n>=this.header.numRequiredSignatures){const c=n-r,f=e-r-this.header.numReadonlyUnsignedAccounts;return c<f}else{const c=r-this.header.numReadonlySignedAccounts;return n<c}}resolveAddressTableLookups(n){const r={writable:[],readonly:[]};for(const e of this.addressTableLookups){const c=n.find(o=>o.key.equals(e.accountKey));if(!c)throw new Error(`Failed to find address lookup table account for table key ${e.accountKey.toBase58()}`);for(const o of e.writableIndexes)if(o<c.state.addresses.length)r.writable.push(c.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${e.accountKey.toBase58()}`);for(const o of e.readonlyIndexes)if(o<c.state.addresses.length)r.readonly.push(c.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${e.accountKey.toBase58()}`)}return r}static compile(n){const r=Bn.compile(n.instructions,n.payerKey),e=new Array,c={writable:new Array,readonly:new Array},o=n.addressLookupTableAccounts||[];for(const L of o){const F=r.extractTableLookup(L);if(F!==void 0){const[I,{writable:_,readonly:C}]=F;e.push(I),c.writable.push(..._),c.readonly.push(...C)}}const[f,x]=r.getMessageComponents(),B=new mn(x,c).compileInstructions(n.instructions);return new wn({header:f,staticAccountKeys:x,recentBlockhash:n.recentBlockhash,compiledInstructions:B,addressTableLookups:e})}serialize(){const n=Array();ne(n,this.staticAccountKeys.length);const r=this.serializeInstructions(),e=Array();ne(e,this.compiledInstructions.length);const c=this.serializeAddressTableLookups(),o=Array();ne(o,this.addressTableLookups.length);const f=b.struct([b.u8("prefix"),b.struct([b.u8("numRequiredSignatures"),b.u8("numReadonlySignedAccounts"),b.u8("numReadonlyUnsignedAccounts")],"header"),b.blob(n.length,"staticAccountKeysLength"),b.seq(et(),this.staticAccountKeys.length,"staticAccountKeys"),et("recentBlockhash"),b.blob(e.length,"instructionsLength"),b.blob(r.length,"serializedInstructions"),b.blob(o.length,"addressTableLookupsLength"),b.blob(c.length,"serializedAddressTableLookups")]),x=new Uint8Array(an),B=f.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(n),staticAccountKeys:this.staticAccountKeys.map(L=>L.toBytes()),recentBlockhash:ce.decode(this.recentBlockhash),instructionsLength:new Uint8Array(e),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:c},x);return x.slice(0,B)}serializeInstructions(){let n=0;const r=new Uint8Array(an);for(const e of this.compiledInstructions){const c=Array();ne(c,e.accountKeyIndexes.length);const o=Array();ne(o,e.data.length);const f=b.struct([b.u8("programIdIndex"),b.blob(c.length,"encodedAccountKeyIndexesLength"),b.seq(b.u8(),e.accountKeyIndexes.length,"accountKeyIndexes"),b.blob(o.length,"encodedDataLength"),b.blob(e.data.length,"data")]);n+=f.encode({programIdIndex:e.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(c),accountKeyIndexes:e.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:e.data},r,n)}return r.slice(0,n)}serializeAddressTableLookups(){let n=0;const r=new Uint8Array(an);for(const e of this.addressTableLookups){const c=Array();ne(c,e.writableIndexes.length);const o=Array();ne(o,e.readonlyIndexes.length);const f=b.struct([et("accountKey"),b.blob(c.length,"encodedWritableIndexesLength"),b.seq(b.u8(),e.writableIndexes.length,"writableIndexes"),b.blob(o.length,"encodedReadonlyIndexesLength"),b.seq(b.u8(),e.readonlyIndexes.length,"readonlyIndexes")]);n+=f.encode({accountKey:e.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(c),writableIndexes:e.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:e.readonlyIndexes},r,n)}return r.slice(0,n)}static deserialize(n){let r=[...n];const e=me(r),c=e&Tr;le(e!==c,"Expected versioned message but received legacy message");const o=c;le(o===0,`Expected versioned message with version 0 but found version ${o}`);const f={numRequiredSignatures:me(r),numReadonlySignedAccounts:me(r),numReadonlyUnsignedAccounts:me(r)},x=[],g=ee(r);for(let C=0;C<g;C++)x.push(new Q(re(r,0,xe)));const B=ce.encode(re(r,0,xe)),L=ee(r),F=[];for(let C=0;C<L;C++){const z=me(r),K=ee(r),N=re(r,0,K),P=ee(r),D=new Uint8Array(re(r,0,P));F.push({programIdIndex:z,accountKeyIndexes:N,data:D})}const I=ee(r),_=[];for(let C=0;C<I;C++){const z=new Q(re(r,0,xe)),K=ee(r),N=re(r,0,K),P=ee(r),D=re(r,0,P);_.push({accountKey:z,writableIndexes:N,readonlyIndexes:D})}return new wn({header:f,staticAccountKeys:x,recentBlockhash:B,compiledInstructions:F,addressTableLookups:_})}}const ds={deserializeMessageVersion(t){const n=t[0],r=n&Tr;return r===n?"legacy":r},deserialize:t=>{const n=ds.deserializeMessageVersion(t);if(n==="legacy")return yn.from(t);if(n===0)return wn.deserialize(t);throw new Error(`Transaction message version ${n} deserialization is not supported`)}};nt.Buffer.alloc(yr).fill(0);class Or{get version(){return this.message.version}constructor(n,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)le(r.length===n.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const e=[];for(let c=0;c<n.header.numRequiredSignatures;c++)e.push(new Uint8Array(yr));this.signatures=e}this.message=n}serialize(){const n=this.message.serialize(),r=Array();ne(r,this.signatures.length);const e=b.struct([b.blob(r.length,"encodedSignaturesLength"),b.seq(du(),this.signatures.length,"signatures"),b.blob(n.length,"serializedMessage")]),c=new Uint8Array(2048),o=e.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:n},c);return c.slice(0,o)}static deserialize(n){let r=[...n];const e=[],c=ee(r);for(let f=0;f<c;f++)e.push(new Uint8Array(re(r,0,yr)));const o=ds.deserialize(new Uint8Array(r));return new Or(o,e)}sign(n){const r=this.message.serialize(),e=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const c of n){const o=e.findIndex(f=>f.equals(c.publicKey));le(o>=0,`Cannot sign with non signer key ${c.publicKey.toBase58()}`),this.signatures[o]=cu(r,c.secretKey)}}addSignature(n,r){le(r.byteLength===64,"Signature must be 64 bytes long");const c=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(n));le(c>=0,`Can not add signature; \`${n.toBase58()}\` is not required to sign this transaction`),this.signatures[c]=r}}new Q("SysvarC1ock11111111111111111111111111111111");new Q("SysvarEpochSchedu1e111111111111111111111111");new Q("Sysvar1nstructions1111111111111111111111111");new Q("SysvarRecentB1ockHashes11111111111111111111");new Q("SysvarRent111111111111111111111111111111111");new Q("SysvarRewards111111111111111111111111111111");new Q("SysvarS1otHashes111111111111111111111111111");new Q("SysvarS1otHistory11111111111111111111111111");new Q("SysvarStakeHistory1111111111111111111111111");const wu=b.nu64("lamportsPerSignature"),vu=b.struct([b.u32("version"),b.u32("state"),et("authorizedPubkey"),et("nonce"),b.struct([wu],"feeCalculator")]);vu.span;function Ke(t){const n=b.blob(8,t),r=n.decode.bind(n),e=n.encode.bind(n),c=n,o=qa();return c.decode=(f,x)=>{const g=r(f,x);return o.decode(g)},c.encode=(f,x,g)=>{const B=o.encode(f);return e(B,x,g)},c}Object.freeze({Create:{index:0,layout:b.struct([b.u32("instruction"),b.ns64("lamports"),b.ns64("space"),et("programId")])},Assign:{index:1,layout:b.struct([b.u32("instruction"),et("programId")])},Transfer:{index:2,layout:b.struct([b.u32("instruction"),Ke("lamports")])},CreateWithSeed:{index:3,layout:b.struct([b.u32("instruction"),et("base"),Ce("seed"),b.ns64("lamports"),b.ns64("space"),et("programId")])},AdvanceNonceAccount:{index:4,layout:b.struct([b.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:b.struct([b.u32("instruction"),b.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:b.struct([b.u32("instruction"),et("authorized")])},AuthorizeNonceAccount:{index:7,layout:b.struct([b.u32("instruction"),et("authorized")])},Allocate:{index:8,layout:b.struct([b.u32("instruction"),b.ns64("space")])},AllocateWithSeed:{index:9,layout:b.struct([b.u32("instruction"),et("base"),Ce("seed"),b.ns64("space"),et("programId")])},AssignWithSeed:{index:10,layout:b.struct([b.u32("instruction"),et("base"),Ce("seed"),et("programId")])},TransferWithSeed:{index:11,layout:b.struct([b.u32("instruction"),Ke("lamports"),Ce("seed"),et("programId")])},UpgradeNonceAccount:{index:12,layout:b.struct([b.u32("instruction")])}});new Q("11111111111111111111111111111111");new Q("BPFLoader2111111111111111111111111111111111");b.struct([b.u32("typeIndex"),Ke("deactivationSlot"),b.nu64("lastExtendedSlot"),b.u8("lastExtendedStartIndex"),b.u8(),b.seq(et(),b.offset(b.u8(),-1),"authority")]);const lt=tn(_r(Q),Z(),t=>new Q(t)),ps=Rr([Z(),ut("base64")]),Lr=tn(_r(nt.Buffer),ps,t=>nt.Buffer.from(t[0],"base64"));function gs(t){return Qt([q({jsonrpc:ut("2.0"),id:Z(),result:t}),q({jsonrpc:ut("2.0"),id:Z(),error:q({code:Pe(),message:Z(),data:W($a())})})])}const bu=gs(Pe());function ot(t){return tn(gs(t),bu,n=>"error"in n?n:{...n,result:Ge(n.result,t)})}function oe(t){return ot(q({context:q({slot:R()}),value:t}))}function An(t){return q({context:q({slot:R()}),value:t})}const xu=q({foundation:R(),foundationTerm:R(),initial:R(),taper:R(),terminal:R()});ot($(j(q({epoch:R(),effectiveSlot:R(),amount:R(),postBalance:R(),commission:W(j(R()))}))));const Eu=$(q({slot:R(),prioritizationFee:R()})),Mu=q({total:R(),validator:R(),foundation:R(),epoch:R()}),Su=q({epoch:R(),slotIndex:R(),slotsInEpoch:R(),absoluteSlot:R(),blockHeight:W(R()),transactionCount:W(R())}),Bu=q({slotsPerEpoch:R(),leaderScheduleSlotOffset:R(),warmup:he(),firstNormalEpoch:R(),firstNormalSlot:R()}),Au=ss(Z(),$(R())),ke=j(Qt([q({}),Z()])),Iu=q({err:ke}),_u=ut("receivedSignature");q({"solana-core":Z(),"feature-set":W(R())});const Ru=q({program:Z(),programId:lt,parsed:Pe()}),ku=q({programId:lt,accounts:$(lt),data:Z()});oe(q({err:j(Qt([q({}),Z()])),logs:j($(Z())),accounts:W(j($(j(q({executable:he(),owner:Z(),lamports:R(),data:$(Z()),rentEpoch:W(R())}))))),unitsConsumed:W(R()),returnData:W(j(q({programId:Z(),data:Rr([Z(),ut("base64")])}))),innerInstructions:W(j($(q({index:R(),instructions:$(Qt([Ru,ku]))}))))}));oe(q({byIdentity:ss(Z(),$(R())),range:q({firstSlot:R(),lastSlot:R()})}));ot(xu);ot(Mu);ot(Eu);ot(Su);ot(Bu);ot(Au);ot(R());oe(q({total:R(),circulating:R(),nonCirculating:R(),nonCirculatingAccounts:$(lt)}));const Tu=q({amount:Z(),uiAmount:j(R()),decimals:R(),uiAmountString:W(Z())});oe($(q({address:lt,amount:Z(),uiAmount:j(R()),decimals:R(),uiAmountString:W(Z())})));oe($(q({pubkey:lt,account:q({executable:he(),owner:lt,lamports:R(),data:Lr,rentEpoch:R()})})));const wr=q({program:Z(),parsed:Pe(),space:R()});oe($(q({pubkey:lt,account:q({executable:he(),owner:lt,lamports:R(),data:wr,rentEpoch:R()})})));oe($(q({lamports:R(),address:lt})));const Ur=q({executable:he(),owner:lt,lamports:R(),data:Lr,rentEpoch:R()});q({pubkey:lt,account:Ur});const Ou=tn(Qt([_r(nt.Buffer),wr]),Qt([ps,wr]),t=>Array.isArray(t)?Ge(t,Lr):t),Lu=q({executable:he(),owner:lt,lamports:R(),data:Ou,rentEpoch:R()});q({pubkey:lt,account:Lu});q({state:Qt([ut("active"),ut("inactive"),ut("activating"),ut("deactivating")]),active:R(),inactive:R()});ot($(q({signature:Z(),slot:R(),err:ke,memo:j(Z()),blockTime:W(j(R()))})));ot($(q({signature:Z(),slot:R(),err:ke,memo:j(Z()),blockTime:W(j(R()))})));q({subscription:R(),result:An(Ur)});const Uu=q({pubkey:lt,account:Ur});q({subscription:R(),result:An(Uu)});const Cu=q({parent:R(),slot:R(),root:R()});q({subscription:R(),result:Cu});const Nu=Qt([q({type:Qt([ut("firstShredReceived"),ut("completed"),ut("optimisticConfirmation"),ut("root")]),slot:R(),timestamp:R()}),q({type:ut("createdBank"),parent:R(),slot:R(),timestamp:R()}),q({type:ut("frozen"),slot:R(),timestamp:R(),stats:q({numTransactionEntries:R(),numSuccessfulTransactions:R(),numFailedTransactions:R(),maxTransactionsPerEntry:R()})}),q({type:ut("dead"),slot:R(),timestamp:R(),err:Z()})]);q({subscription:R(),result:Nu});q({subscription:R(),result:An(Qt([Iu,_u]))});q({subscription:R(),result:R()});q({pubkey:Z(),gossip:j(Z()),tpu:j(Z()),rpc:j(Z()),version:j(Z())});const Bi=q({votePubkey:Z(),nodePubkey:Z(),activatedStake:R(),epochVoteAccount:he(),epochCredits:$(Rr([R(),R(),R()])),commission:R(),lastVote:R(),rootSlot:j(R())});ot(q({current:$(Bi),delinquent:$(Bi)}));const zu=Qt([ut("processed"),ut("confirmed"),ut("finalized")]),qu=q({slot:R(),confirmations:j(R()),err:ke,confirmationStatus:W(zu)});oe($(j(qu)));ot(R());const ms=q({accountKey:lt,writableIndexes:$(R()),readonlyIndexes:$(R())}),Cr=q({signatures:$(Z()),message:q({accountKeys:$(Z()),header:q({numRequiredSignatures:R(),numReadonlySignedAccounts:R(),numReadonlyUnsignedAccounts:R()}),instructions:$(q({accounts:$(R()),data:Z(),programIdIndex:R()})),recentBlockhash:Z(),addressTableLookups:W($(ms))})}),ys=q({pubkey:lt,signer:he(),writable:he(),source:W(Qt([ut("transaction"),ut("lookupTable")]))}),ws=q({accountKeys:$(ys),signatures:$(Z())}),vs=q({parsed:Pe(),program:Z(),programId:lt}),bs=q({accounts:$(lt),data:Z(),programId:lt}),Fu=Qt([bs,vs]),Du=Qt([q({parsed:Pe(),program:Z(),programId:Z()}),q({accounts:$(Z()),data:Z(),programId:Z()})]),xs=tn(Fu,Du,t=>"accounts"in t?Ge(t,bs):Ge(t,vs)),Es=q({signatures:$(Z()),message:q({accountKeys:$(ys),instructions:$(xs),recentBlockhash:Z(),addressTableLookups:W(j($(ms)))})}),vn=q({accountIndex:R(),mint:Z(),owner:W(Z()),programId:W(Z()),uiTokenAmount:Tu}),Ms=q({writable:$(lt),readonly:$(lt)}),In=q({err:ke,fee:R(),innerInstructions:W(j($(q({index:R(),instructions:$(q({accounts:$(R()),data:Z(),programIdIndex:R()}))})))),preBalances:$(R()),postBalances:$(R()),logMessages:W(j($(Z()))),preTokenBalances:W(j($(vn))),postTokenBalances:W(j($(vn))),loadedAddresses:W(Ms),computeUnitsConsumed:W(R()),costUnits:W(R())}),Nr=q({err:ke,fee:R(),innerInstructions:W(j($(q({index:R(),instructions:$(xs)})))),preBalances:$(R()),postBalances:$(R()),logMessages:W(j($(Z()))),preTokenBalances:W(j($(vn))),postTokenBalances:W(j($(vn))),loadedAddresses:W(Ms),computeUnitsConsumed:W(R()),costUnits:W(R())}),Ze=Qt([ut(0),ut("legacy")]),Te=q({pubkey:Z(),lamports:R(),postBalance:j(R()),rewardType:j(Z()),commission:W(j(R()))});ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(q({transaction:Cr,meta:j(In),version:W(Ze)})),rewards:W($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),rewards:W($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(q({transaction:ws,meta:j(In),version:W(Ze)})),rewards:W($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(q({transaction:Es,meta:j(Nr),version:W(Ze)})),rewards:W($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(q({transaction:ws,meta:j(Nr),version:W(Ze)})),rewards:W($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),rewards:W($(Te)),blockTime:j(R()),blockHeight:j(R())})));ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),transactions:$(q({transaction:Cr,meta:j(In)})),rewards:W($(Te)),blockTime:j(R())})));ot(j(q({blockhash:Z(),previousBlockhash:Z(),parentSlot:R(),signatures:$(Z()),blockTime:j(R())})));ot(j(q({slot:R(),meta:j(In),blockTime:W(j(R())),transaction:Cr,version:W(Ze)})));ot(j(q({slot:R(),transaction:Es,meta:j(Nr),blockTime:W(j(R())),version:W(Ze)})));oe(q({blockhash:Z(),lastValidBlockHeight:R()}));oe(he());const Ku=q({slot:R(),numTransactions:R(),numSlots:R(),samplePeriodSecs:R()});ot($(Ku));oe(j(q({feeCalculator:q({lamportsPerSignature:R()})})));ot(Z());ot(Z());const Pu=q({err:ke,logs:$(Z()),signature:Z()});q({result:An(Pu),subscription:R()});Object.freeze({CreateLookupTable:{index:0,layout:b.struct([b.u32("instruction"),Ke("recentSlot"),b.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:b.struct([b.u32("instruction")])},ExtendLookupTable:{index:2,layout:b.struct([b.u32("instruction"),Ke(),b.seq(et(),b.offset(b.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:b.struct([b.u32("instruction")])},CloseLookupTable:{index:4,layout:b.struct([b.u32("instruction")])}});new Q("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:b.struct([b.u8("instruction"),b.u32("units"),b.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:b.struct([b.u8("instruction"),b.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:b.struct([b.u8("instruction"),b.u32("units")])},SetComputeUnitPrice:{index:3,layout:b.struct([b.u8("instruction"),Ke("microLamports")])}});new Q("ComputeBudget111111111111111111111111111111");b.struct([b.u8("numSignatures"),b.u8("padding"),b.u16("signatureOffset"),b.u16("signatureInstructionIndex"),b.u16("publicKeyOffset"),b.u16("publicKeyInstructionIndex"),b.u16("messageDataOffset"),b.u16("messageDataSize"),b.u16("messageInstructionIndex")]);new Q("Ed25519SigVerify111111111111111111111111111");uu.utils.isValidPrivateKey;b.struct([b.u8("numSignatures"),b.u16("signatureOffset"),b.u8("signatureInstructionIndex"),b.u16("ethAddressOffset"),b.u8("ethAddressInstructionIndex"),b.u16("messageDataOffset"),b.u16("messageDataSize"),b.u8("messageInstructionIndex"),b.blob(20,"ethAddress"),b.blob(64,"signature"),b.u8("recoveryId")]);new Q("KeccakSecp256k11111111111111111111111111111");var Ss;new Q("StakeConfig11111111111111111111111111111111");class Bs{constructor(n,r,e){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=n,this.epoch=r,this.custodian=e}}Ss=Bs;Bs.default=new Ss(0,0,Q.default);Object.freeze({Initialize:{index:0,layout:b.struct([b.u32("instruction"),pu(),gu()])},Authorize:{index:1,layout:b.struct([b.u32("instruction"),et("newAuthorized"),b.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:b.struct([b.u32("instruction")])},Split:{index:3,layout:b.struct([b.u32("instruction"),b.ns64("lamports")])},Withdraw:{index:4,layout:b.struct([b.u32("instruction"),b.ns64("lamports")])},Deactivate:{index:5,layout:b.struct([b.u32("instruction")])},Merge:{index:7,layout:b.struct([b.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:b.struct([b.u32("instruction"),et("newAuthorized"),b.u32("stakeAuthorizationType"),Ce("authoritySeed"),et("authorityOwner")])}});new Q("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:b.struct([b.u32("instruction"),mu()])},Authorize:{index:1,layout:b.struct([b.u32("instruction"),et("newAuthorized"),b.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:b.struct([b.u32("instruction"),b.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:b.struct([b.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:b.struct([b.u32("instruction"),yu()])}});new Q("Vote111111111111111111111111111111111111111");new Q("Va1idator1nfo111111111111111111111111111111");q({name:Z(),website:W(Z()),details:W(Z()),iconUrl:W(Z()),keybaseUsername:W(Z())});new Q("Vote111111111111111111111111111111111111111");b.struct([et("nodePubkey"),et("authorizedWithdrawer"),b.u8("commission"),b.nu64(),b.seq(b.struct([b.nu64("slot"),b.u32("confirmationCount")]),b.offset(b.u32(),-8),"votes"),b.u8("rootSlotValid"),b.nu64("rootSlot"),b.nu64(),b.seq(b.struct([b.nu64("epoch"),et("authorizedVoter")]),b.offset(b.u32(),-8),"authorizedVoters"),b.struct([b.seq(b.struct([et("authorizedPubkey"),b.nu64("epochOfLastAuthorizedSwitch"),b.nu64("targetEpoch")]),32,"buf"),b.nu64("idx"),b.u8("isEmpty")],"priorVoters"),b.nu64(),b.seq(b.struct([b.nu64("epoch"),b.nu64("credits"),b.nu64("prevCredits")]),b.offset(b.u32(),-8),"epochCredits"),b.struct([b.nu64("slot"),b.nu64("timestamp")],"lastTimestamp")]);class Zu extends Vs{constructor({config:n,state:r}){super({config:n,state:r})}async switchChain(n){throw ue.unsupportedOperation("Chain switching is not supported by this connector")}async setupProvider(n,r){const e=new $s,c=this.getChain(r),o=this.getProviderHandlers(n),f=eo(o);e.push(f);const x=no(c);e.push(x);const g=this.getInjectedProviderProxy(n);g&&e.push(g);const B=js(e);this.updateProviderEngineProxy(B),await this.lookupNetwork(n,r)}async lookupNetwork(n,r){return this.update({chainId:r}),r||""}getInjectedProviderProxy(n){}}const Vu=t=>({requestAccounts:async()=>t.publicKey?[Ne.encode(t.publicKey.toBytes())]:[],getPublicKey:async()=>t.publicKey?Ne.encode(t.publicKey.toBytes()):"",getAccounts:async()=>t.publicKey?[Ne.encode(t.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw Hn.methodNotSupported()},getSecretKey:async()=>{throw Hn.methodNotSupported()},signTransaction:async r=>await t.signTransaction(r.params.message),signMessage:async r=>await t.signMessage(r.params.data,r.params.from,r.params.display),signAllTransactions:async r=>{var e,c;if(!((e=r.params)!==null&&e!==void 0&&e.message)||!((c=r.params)!==null&&c!==void 0&&c.message.length))throw Hn.invalidParams("message");return await t.signAllTransactions(r.params.message)},signAndSendTransaction:async r=>await t.signAndSendTransaction(r.params.message)}),As=t=>{switch(t.chainId){case"0x65":return"solana:mainnet";case"0x66":return"solana:testnet";case"0x67":return"solana:devnet";default:return null}};class $u extends Zu{getProviderHandlers(n){const r=As(this.config.chain),e=()=>{const g=n==null?void 0:n.accounts[0];if(!g)throw ue.notConnectedError();return g};return Vu({get publicKey(){return new Q(e().publicKey)},signMessage:async g=>{const B=e(),L=new Uint8Array(Buffer.from(g,"utf-8")),F=await n.features[Li].signMessage({account:B,message:L});return Ne.encode(F[0].signature)},signTransaction:async g=>{const B=e(),L=await n.features[hr].signTransaction({account:B,transaction:new Uint8Array(Buffer.from(g,"base64")),chain:r});return Ne.encode(Or.deserialize(L[0].signedTransaction).signatures[0])},signAllTransactions:async g=>{const B=e();return Promise.all(g.map(async L=>{const F=await n.features[hr].signTransaction({account:B,transaction:new Uint8Array(Buffer.from(L,"base64")),chain:r});return Buffer.from(F[0].signedTransaction).toString("base64")}))},signAndSendTransaction:async g=>{const B=e(),L=await n.features[Oi].signAndSendTransaction({account:B,transaction:new Uint8Array(Buffer.from(g,"base64")),chain:r});return Ne.encode(L[0].signature)}})}}class ju extends Eo{constructor(n){super(n),we(this,"name",void 0),we(this,"connectorNamespace",Gs.SOLANA),we(this,"currentChainNamespace",Hs.SOLANA),we(this,"type",Ws.EXTERNAL),we(this,"isInjected",!0),we(this,"status",ae.NOT_READY),we(this,"wallet",null),we(this,"injectedProvider",null),this.name=n.name,this.icon=n.wallet.icon,this.wallet=["gate","solflare"].includes(this.name)?Object.freeze(n.wallet):n.wallet}get provider(){return this.status!==ae.NOT_READY&&this.injectedProvider?this.injectedProvider:null}get isWalletConnected(){return this.status===ae.CONNECTED&&this.wallet.accounts.length>0}async init(n){await super.init(n);const r=this.coreOptions.chains.find(e=>e.chainId===n.chainId);super.checkInitializationRequirements({chainConfig:r}),this.injectedProvider=new $u({config:{chain:r,chains:this.coreOptions.chains}}),await this.injectedProvider.setupProvider(this.wallet,n.chainId),this.status=ae.READY,this.emit(Ee.READY,this.name);try{if(Xs.debug("initializing solana injected connector"),n.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:n.chainId})))throw this.rehydrated=!1,ue.connectionError("Failed to rehydrate.")}catch(e){this.emit(Ee.REHYDRATION_ERROR,e)}}async connect({chainId:n}){try{super.checkConnectionRequirements();const r=this.coreOptions.chains.find(c=>c.chainId===n);if(!r)throw ue.connectionError("Chain config is not available");this.status=ae.CONNECTING,this.emit(Ee.CONNECTING,{connector:this.name});const e=As(r);if(!this.wallet.chains.find(c=>c===e))throw ue.connectionError(`Chain ${e} not supported. Supported chains are ${this.wallet.chains.join(", ")}`);if(this.isWalletConnected||await this.wallet.features[Ui].connect(),this.wallet.accounts.length===0)throw ue.connectionError();return this.status=ae.CONNECTED,this.emit(Ee.CONNECTED,{connector:this.name,reconnected:this.rehydrated,provider:this.provider}),this.provider}catch(r){throw this.status=ae.READY,this.rehydrated||this.emit(Ee.ERRORED,r),this.rehydrated=!1,r}}async disconnect(n={cleanup:!1}){await super.disconnectSession();try{var r;await((r=this.wallet.features[ko])===null||r===void 0?void 0:r.disconnect()),n.cleanup?(this.status=ae.NOT_READY,this.injectedProvider=null):this.status=ae.READY,await super.disconnect()}catch(e){this.emit(Ee.ERRORED,ue.disconnectionError(e==null?void 0:e.message))}}async getUserInfo(){if(!this.isWalletConnected)throw ue.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(n,r=!1){var e;super.checkSwitchChainRequirements(n,r),await((e=this.injectedProvider)===null||e===void 0?void 0:e.switchChain(n))}async enableMFA(){throw new Error("Method not implemented.")}async manageMFA(){throw new Error("Method Not implemented")}}const ec=t=>({coreOptions:n})=>new ju({name:Ys(t.name),wallet:t,coreOptions:n}),nc=t=>{const{chains:n,features:r}=t;return n.some(o=>o.startsWith("solana"))?!![Ui,Li,hr,Oi].every(o=>Object.keys(r).includes(o)):void 0};export{Ju as createSolanaMipd,nc as hasSolanaWalletStandardFeatures,ec as walletStandardConnector};
